				;file D:\Git_project\Touch-Slave\MAIN_PROGRAM_V103\MAIN_PROGRAM_V103.asm
				;1	
				;2	message '****************************************************************'
				;3	message '*PROJECT NAME :MAIN PROGRAM V103                               *'
				;4	message '*     VERSION :V103                                            *'
				;5	message '* ICE VERSION :                                                *'
				;6	message '*      DATE   :20160302                                        *'
				;7	message '*      REMARK :V103 add 33~36 key                              *'
				;8	message '****************************************************************'
				;9	                ;=INCLUDE REFERENCE FILE
				;10	                INCLUDE MAIN_PROGRAM_V103.INC
				;11	
				;12	                ;-PUBLIC LABEL
				;13	                PUBLIC  _LOAD_TKS_GLOBE_VARIES
				;14	                PUBLIC  _LOAD_HXT_REFERENCE
				;15	
				;16	CALL_   MACRO   FUNCTION
				;17	        ifdef   FUNCTION
				;18	                ifdef   PBP
				;19	                MOV     A,bank FUNCTION
				;20	                MOV     PBP,A
				;21	                endif
				;22	                CALL    FUNCTION
				;23	        endif
				;24	                ENDM
				;25	
				;26	EXTEND_FUNCTION_INITIAL MACRO
				;27	                CALL_   EXTEND_FUNCTION_1A_INITIAL
				;28	                CALL_   EXTEND_FUNCTION_1B_INITIAL
				;29	                CALL_   EXTEND_FUNCTION_1C_INITIAL
				;30	                CALL_   EXTEND_FUNCTION_1D_INITIAL
				;31	                CALL_   EXTEND_FUNCTION_1E_INITIAL
				;32	                CALL_   EXTEND_FUNCTION_1F_INITIAL
				;33	                CALL_   EXTEND_FUNCTION_1G_INITIAL
				;34	                CALL_   EXTEND_FUNCTION_1H_INITIAL
				;35	
				;36	                CALL_   EXTEND_FUNCTION_2A_INITIAL
				;37	                CALL_   EXTEND_FUNCTION_2B_INITIAL
				;38	                CALL_   EXTEND_FUNCTION_2C_INITIAL
				;39	                CALL_   EXTEND_FUNCTION_2D_INITIAL
				;40	                CALL_   EXTEND_FUNCTION_2E_INITIAL
				;41	                CALL_   EXTEND_FUNCTION_2F_INITIAL
				;42	                CALL_   EXTEND_FUNCTION_2G_INITIAL
				;43	                CALL_   EXTEND_FUNCTION_2H_INITIAL
				;44	                ENDM
				;45	
				;46	EXTEND_FUNCTION MACRO
				;47	                CALL_   EXTEND_FUNCTION_1A
				;48	                CALL_   EXTEND_FUNCTION_1B
				;49	                CALL_   EXTEND_FUNCTION_1C
				;50	                CALL_   EXTEND_FUNCTION_1D
				;51	                CALL_   EXTEND_FUNCTION_1E
				;52	                CALL_   EXTEND_FUNCTION_1F
				;53	                CALL_   EXTEND_FUNCTION_1G
				;54	                CALL_   EXTEND_FUNCTION_1H
				;55	
				;56	                CALL_   EXTEND_FUNCTION_2A
				;57	                CALL_   EXTEND_FUNCTION_2B
				;58	                CALL_   EXTEND_FUNCTION_2C
				;59	                CALL_   EXTEND_FUNCTION_2D
				;60	                CALL_   EXTEND_FUNCTION_2E
				;61	                CALL_   EXTEND_FUNCTION_2F
				;62	                CALL_   EXTEND_FUNCTION_2G
				;63	                CALL_   EXTEND_FUNCTION_2H
				;64	                ENDM
				;65	                ;==============
				;66	                ;=DATA SETCTION
				;67	                ;==============
				;68	MAIN_DATA       .SECTION          'DATA'
				;69	
				;70	ifndef  ESCpowerIDcheck
				;71	POR_ID          DB      2 DUP(?)
				;72	endif
				;73	
				;74	
				;75	
				;76	                ;==============
				;77	                ;=CODE SETCTION
				;78	                ;==============
				;79	PROGRAM_ENTRY   .SECTION  AT 000H 'CODE'
				;80	        ifdef   PBP
				;81	                CLR     PBP
				;82	                ifndef  ESCpowerIDcheck
				;83	                MOV     A,042H      ;ASCII = B
				;84	                endif
				;85	        else
				;86	                ;----------------
				;87	                ;-SET POR ID 1---
				;88	                ;----------------
				;89	                ifndef  ESCpowerIDcheck
				;90	                MOV     A,042H      ;ASCII = B
				PROGRAM_ENTRY:
				include BS83B12A-3.inc
0000	0F42	mov     a, 42H
				;91	                SNZ     TO
0001	3A8A	snz     TO
				;92	                MOV     POR_ID[0],A
0002	40C7	mov     POR_ID, a
				;93	                endif
				;94	        endif
				;95	                JMP     PROGRAM_RESET
0003	2CCE	jmp     PROGRAM_RESET
				;96	
				;97	                ;==============
				;98	                ;=MAIN PROGRAM=
				;99	                ;==============
				;100	MAIN_PROGRAM    .SECTION          'CODE'
				;101	
				;102	                ;;***********************
				;103	PROGRAM_RESET:  ;;* PROGRAM ENTRY *******
				;104	                ;;***********************
				;105	        ifdef   PBP
				;106	                ifndef  ESCpowerIDcheck
				;107	                SNZ     TO
				;108	                MOV     POR_ID[0],A
				;109	                endif
				;110	        endif
				;111	                ;----------------
				;112	                ;-SET POR ID 2---
				;113	                ;----------------
				;114	        ifndef  ESCpowerIDcheck
				;115	                MOV     A,053H      ;ASCII = S
				PROGRAM_RESET:
				MAIN_PROGRAM:
04CE	0F53	mov     a, 53H
				;116	                MOV     POR_ID[1],A
04CF	40C8	mov     POR_ID[1], a
				;117	        endif
				;118	
				;119	
				;120	                ;---------------------
				;121	                ;-MCU HARDWARE INITIAL
				;122	                ;---------------------
				;123	                MCU_HARDWARE_INITIAL
04D0	0F30	mov     a, 30H
04D1	008C	mov     CTRL, a
04D2	0F03	mov     a, 3H
04D3	008B	mov     SMOD, a
04D4	0F52	mov     a, 52H
04D5	009A	mov     WDTC, a
04D6	0F01	mov     a, 1H
04D7	0084	mov     BP, a
04D8	0F80	mov     a, 80H
04D9	24F5	call    CLEAR_RAM
04DA	1F04	clr     BP
04DB	0F60	mov     a, 60H
04DC	24F5	call    CLEAR_RAM
				;124	
				;125	                ;------------------------------
				;126	                ;-LOAD LIBRARY OPTION/THRESHOLD
				;127	                ;------------------------------
				;128	                CALL    _LOAD_TKS_GLOBE_VARIES
04DD	2502	call    _LOAD_HXT_REFERENCE
				;129	
				;130	                ;------------------------
				;131	                ;-EXTEND FUNCTION INITIAL
				;132	                ;------------------------
				;133	                EXTEND_FUNCTION_INITIAL
04DE	20A2	call    L00A2
04DF	2587	call    _USER_PROGRAM_INITIAL
				;134	
				;135	                ;;-----------------------
				;136	MAIN_LOOP:      ;;- MAIN PROGRAM LOOP ---
				;137	                ;;-----------------------
				;138	                CLR     WDT
				MAIN_LOOP:
04E0	0001	clr     wdt
				;139	                CLR     WDT1
04E1	0001	clr     wdt
				;140	                CLR     WDT2
04E2	0005	clr     wdt2
				;141	
				;142	                ;----------------
				;143	                ;-CHECK POR ID --
				;144	                ;----------------
				;145	        ifndef  ESCpowerIDcheck
				;146	                MOV     A,042H
04E3	0F42	mov     a, 42H
				;147	                XORM    A,POR_ID[0]
04E4	44C7	xorm    a, POR_ID
				;148	                MOV     A,053H
04E5	0F53	mov     a, 53H
				;149	                SZ      Z
04E6	3D0A	sz      Z
				;150	                XORM    A,POR_ID[1]
04E7	44C8	xorm    a, POR_ID[1]
				;151	                SNZ     Z
04E8	390A	snz     Z
				;152	                JMP     000H
04E9	2800	jmp     PROGRAM_ENTRY
				;153	        endif
				;154	                ;----------------------
				;155	                ;-RE INITIAL SYS. CLOCK
				;156	                ;----------------------
				;157	                RELOAD_SYS_CLOCK
04EA	0F30	mov     a, 30H
04EB	008C	mov     CTRL, a
04EC	0F03	mov     a, 3H
04ED	008B	mov     SMOD, a
				;158	                EXTEND_FUNCTION
04EE	2018	call    L0018
04EF	25A0	call    _USER_PROGRAM
				;159	                ;----------------
				;160	                ;-SET POR ID  ---
				;161	                ;----------------
				;162	        ifndef  ESCpowerIDcheck
				;163	                MOV     A,042H      ;ASCII = B
04F0	0F42	mov     a, 42H
				;164	                MOV     POR_ID[0],A
04F1	40C7	mov     POR_ID, a
				;165	                MOV     A,053H      ;ASCII = S
04F2	0F53	mov     a, 53H
				;166	                MOV     POR_ID[1],A
04F3	40C8	mov     POR_ID[1], a
				;167	        endif
				;168	
				;169	                ;--------------------
				;170	WDT_WAKEUP:     ;-WDT WAKEUP FUNCTION
				;171	                ;--------------------
				;172	                if      PowerSave==1
				;173	                CALL_   _CHECK_KEY_WAKEUP
				;174	                endif
				;175	
				;176	                ifdef   PBP
				;177	                MOV     A,BANK MAIN_LOOP
				;178	                MOV     PBP,A
				;179	                endif
				;180	                JMP     MAIN_LOOP
				WDT_WAKEUP:
04F4	2CE0	jmp     MAIN_LOOP
				;181	
				;182	
				;183	
				;184	
				;185	
				;186	
				;187	
				;188	
				;189	
				;190	;;***********************************************************
				;191	;;*SUB. NAME:                                               *
				;192	;;*INPUT    :                                               *
				;193	;;*OUTPUT   :                                               *
				;194	;;*USED REG.:                                               *
				;195	;;*FUNCTION :                                               *
				;196	;;***********************************************************
				;197	CLEAR_RAM:
				;198	                MOV     MP1,A
				CLEAR_RAM:
04F5	0083	mov     MP1, a
				;199	        ifndef  ESCpowerIDcheck
				;200	            ifdef  BP
				;201	                ;-CHECK BANK
				;202	                SZ      BP
04F6	1084	sz      BP
				;203	                JMP     CLR_RAM
04F7	2CFE	jmp     CLR_RAM
				;204	            endif
				;205	                ;-CHECK POR_ID RAM
				;206	                MOV     A,OFFSET POR_ID
04F8	0FC7	mov     a, C7H
				;207	                XOR     A,MP1
04F9	0403	xor     a, MP1
				;208	                MOV     A,OFFSET POR_ID+1
04FA	0FC8	mov     a, C8H
				;209	                SNZ     Z
04FB	390A	snz     Z
				;210	                XOR     A,MP1
04FC	0403	xor     a, MP1
				;211	                SNZ     Z
04FD	390A	snz     Z
				;212	        endif
				;213	CLR_RAM:        ;-CLEAR RAM
				;214	                CLR     IAR1
				CLR_RAM:
04FE	1F02	clr     [02H]
				;215	                SIZA    MP1
04FF	1603	siza    MP1
				;216	                JMP     CLEAR_RAM
0500	2CF5	jmp     CLEAR_RAM
				;217	
				;218	                RET
0501	0003	ret
				;219	
				;220	
				;221	;;***********************************************************
				;222	;;*SUB. NAME:                                               *
				;223	;;*INPUT    :                                               *
				;224	;;*OUTPUT   :                                               *
				;225	;;*USED REG.:                                               *
				;226	;;*FUNCTION :                                               *
				;227	;;***********************************************************
				;228	_LOAD_TKS_GLOBE_VARIES:
				;229	_LOAD_HXT_REFERENCE:
				;230	                ;------------------------
				;231	                ;-SET TKS LIBRARY OPTION-
				;232	                ;------------------------
				;233	                MOV     A,GlobeOptionA
				_LOAD_HXT_REFERENCE:
				_LOAD_TKS_GLOBE_VARIES:
0502	0F87	mov     a, 87H
				;234	                MOV     _GLOBE_VARIES[0],A
0503	00E0	mov     __sima[57], a
				;235	                MOV     A,GlobeOptionB
0504	0F30	mov     a, 30H
				;236	                MOV     _GLOBE_VARIES[1],A
0505	00E1	mov     __sima[58], a
				;237	                MOV     A,GlobeOptionC
0506	0F98	mov     a, 98H
				;238	                MOV     _GLOBE_VARIES[2],A
0507	00E2	mov     __sima[59], a
				;239	
				;240	                ;--------------------------
				;241	                ;-SET TOUCH OR IO ATTRIBUTE
				;242	                ;--------------------------
				;243	                MOV     A,IO_TOUCH_ATTR&0FFH
0508	0FFF	mov     a, FFH
				;244	                MOV     _KEY_IO_SEL[0],A
0509	00FA	mov     __sima[83], a
				;245	                ;-IF OVER 2 TOUCH IP (8~16KEY)
				;246	                if      TouchKeyAmount > 8
				;247	                MOV     A,(IO_TOUCH_ATTR>>8)&0FFH
050A	0F0F	mov     a, FH
				;248	                MOV     _KEY_IO_SEL[1],A
050B	00FB	mov     __sima[84], a
				;249	                endif
				;250	                ;-IF OVER 4 TOUCH IP (17~24KEY)
				;251	                if      TouchKeyAmount > 16
				;252	                MOV     A,(IO_TOUCH_ATTR>>16)&0FFH
				;253	                MOV     _KEY_IO_SEL[2],A
				;254	                endif
				;255	                ;-IF OVER 6 TOUCH IP (25~32KEY)
				;256	                if      TouchKeyAmount > 24
				;257	                MOV     A,(IO_TOUCH_ATTR>>24)&0FFH
				;258	                MOV     _KEY_IO_SEL[3],A
				;259	                endif
				;260	
				;261	                ;-IF OVER 6 TOUCH IP (33~36KEY)
				;262	                if      TouchKeyAmount > 32
				;263	                MOV     A,IO_TOUCH_ATTR2
				;264	                MOV     _KEY_IO_SEL[4],A
				;265	                endif
				;266	
				;267	                ;------------------------
				;268	                ;-SET TOUCH KEY THRESHOLD
				;269	                ;------------------------
				;270	                ;-KEY1 THRESHOLD
				;271	                MOV     A,Key1Threshold
050C	0F0A	mov     a, AH
				;272	                MOV     _GLOBE_VARIES[3],A
050D	00E3	mov     __sima[60], a
				;273	
				;274	                if      TouchKeyAmount > 1
				;275	                ;-KEY2 THRESHOLD
				;276	                MOV     A,Key2Threshold
050E	0F0A	mov     a, AH
				;277	                MOV     _GLOBE_VARIES[4],A
050F	00E4	mov     __sima[61], a
				;278	                endif
				;279	
				;280	                if      TouchKeyAmount > 2
				;281	                ;-KEY3 THRESHOLD
				;282	                MOV     A,Key3Threshold
0510	0F0A	mov     a, AH
				;283	                MOV     _GLOBE_VARIES[5],A
0511	00E5	mov     __sima[62], a
				;284	                endif
				;285	
				;286	                if      TouchKeyAmount > 3
				;287	                ;-KEY4 THRESHOLD
				;288	                MOV     A,Key4Threshold
0512	0F0A	mov     a, AH
				;289	                MOV     _GLOBE_VARIES[6],A
0513	00E6	mov     __sima[63], a
				;290	                endif
				;291	
				;292	                if      TouchKeyAmount > 4
				;293	                ;-KEY5 THRESHOLD
				;294	                MOV     A,Key5Threshold
0514	0F0A	mov     a, AH
				;295	                MOV     _GLOBE_VARIES[7],A
0515	00E7	mov     __sima[64], a
				;296	                endif
				;297	
				;298	                if      TouchKeyAmount > 5
				;299	                ;-KEY6 THRESHOLD
				;300	                MOV     A,Key6Threshold
0516	0F0A	mov     a, AH
				;301	                MOV     _GLOBE_VARIES[8],A
0517	00E8	mov     __sima[65], a
				;302	                endif
				;303	
				;304	                if      TouchKeyAmount > 6
				;305	                ;-KEY7 THRESHOLD
				;306	                MOV     A,Key7Threshold
0518	0F0A	mov     a, AH
				;307	                MOV     _GLOBE_VARIES[9],A
0519	00E9	mov     __sima[66], a
				;308	                endif
				;309	
				;310	                if      TouchKeyAmount > 7
				;311	                ;-KEY8 THRESHOLD
				;312	                MOV     A,Key8Threshold
051A	0F0A	mov     a, AH
				;313	                MOV     _GLOBE_VARIES[10],A
051B	00EA	mov     __sima[67], a
				;314	                endif
				;315	
				;316	                if     TouchKeyAmount > 8
				;317	                ;-KEY9 THRESHOLD
				;318	                MOV     A,Key9Threshold
051C	0F0A	mov     a, AH
				;319	                MOV     _GLOBE_VARIES[11],A
051D	00EB	mov     __sima[68], a
				;320	                endif
				;321	
				;322	                if      TouchKeyAmount > 9
				;323	                ;-KEY10 THRESHOLD
				;324	                MOV     A,Key10Threshold
051E	0F0A	mov     a, AH
				;325	                MOV     _GLOBE_VARIES[12],A
051F	00EC	mov     __sima[69], a
				;326	                endif
				;327	
				;328	                if      TouchKeyAmount > 10
				;329	                ;-KEY11 THRESHOLD
				;330	                MOV     A,Key11Threshold
0520	0F0A	mov     a, AH
				;331	                MOV     _GLOBE_VARIES[13],A
0521	00ED	mov     __sima[70], a
				;332	                endif
				;333	
				;334	                if      TouchKeyAmount > 11
				;335	                ;-KEY12 THRESHOLD
				;336	                MOV     A,Key12Threshold
0522	0F0A	mov     a, AH
				;337	                MOV     _GLOBE_VARIES[14],A
0523	00EE	mov     __sima[71], a
				;338	                endif
				;339	
				;340	                if      TouchKeyAmount > 12
				;341	                ;-KEY13 THRESHOLD
				;342	                MOV     A,Key13Threshold
				;343	                MOV     _GLOBE_VARIES[15],A
				;344	                endif
				;345	
				;346	                if      TouchKeyAmount > 13
				;347	                ;-KEY14 THRESHOLD
				;348	                MOV     A,Key14Threshold
				;349	                MOV     _GLOBE_VARIES[16],A
				;350	                endif
				;351	
				;352	                if      TouchKeyAmount > 14
				;353	                ;-KEY15 THRESHOLD
				;354	                MOV     A,Key15Threshold
				;355	                MOV     _GLOBE_VARIES[17],A
				;356	                endif
				;357	
				;358	                if      TouchKeyAmount > 15
				;359	                ;-KEY16 THRESHOLD
				;360	                MOV     A,Key16Threshold
				;361	                MOV     _GLOBE_VARIES[18],A
				;362	                endif
				;363	
				;364	                if      TouchKeyAmount > 16
				;365	                ;-KEY17 THRESHOLD
				;366	                MOV     A,Key17Threshold
				;367	                MOV     _GLOBE_VARIES[19],A
				;368	                endif
				;369	
				;370	                if      TouchKeyAmount > 17
				;371	                ;-KEY18 THRESHOLD
				;372	                MOV     A,Key18Threshold
				;373	                MOV     _GLOBE_VARIES[20],A
				;374	                endif
				;375	
				;376	                if      TouchKeyAmount > 18
				;377	                ;-KEY19 THRESHOLD
				;378	                MOV     A,Key19Threshold
				;379	                MOV     _GLOBE_VARIES[21],A
				;380	                endif
				;381	
				;382	                if      TouchKeyAmount > 19
				;383	                ;-KEY20 THRESHOLD
				;384	                MOV     A,Key20Threshold
				;385	                MOV     _GLOBE_VARIES[22],A
				;386	                endif
				;387	
				;388	                if      TouchKeyAmount > 20
				;389	                ;-KEY17 THRESHOLD
				;390	                MOV     A,Key21Threshold
				;391	                MOV     _GLOBE_VARIES[23],A
				;392	                endif
				;393	
				;394	                if      TouchKeyAmount > 21
				;395	                ;-KEY18 THRESHOLD
				;396	                MOV     A,Key22Threshold
				;397	                MOV     _GLOBE_VARIES[24],A
				;398	                endif
				;399	
				;400	                if      TouchKeyAmount > 22
				;401	                ;-KEY19 THRESHOLD
				;402	                MOV     A,Key23Threshold
				;403	                MOV     _GLOBE_VARIES[25],A
				;404	                endif
				;405	
				;406	                if      TouchKeyAmount > 23
				;407	                ;-KEY20 THRESHOLD
				;408	                MOV     A,Key24Threshold
				;409	                MOV     _GLOBE_VARIES[26],A
				;410	                endif
				;411	
				;412	                if      TouchKeyAmount > 24
				;413	                ;-KEY17 THRESHOLD
				;414	                MOV     A,Key25Threshold
				;415	                MOV     _GLOBE_VARIES[27],A
				;416	                endif
				;417	
				;418	                if      TouchKeyAmount > 25
				;419	                ;-KEY18 THRESHOLD
				;420	                MOV     A,Key26Threshold
				;421	                MOV     _GLOBE_VARIES[28],A
				;422	                endif
				;423	
				;424	                if      TouchKeyAmount > 26
				;425	                ;-KEY19 THRESHOLD
				;426	                MOV     A,Key27Threshold
				;427	                MOV     _GLOBE_VARIES[29],A
				;428	                endif
				;429	
				;430	                if      TouchKeyAmount > 27
				;431	                ;-KEY20 THRESHOLD
				;432	                MOV     A,Key28Threshold
				;433	                MOV     _GLOBE_VARIES[30],A
				;434	                endif
				;435	
				;436	                if      TouchKeyAmount > 28
				;437	                ;-KEY29 THRESHOLD
				;438	                MOV     A,Key29Threshold
				;439	                MOV     _GLOBE_VARIES[31],A
				;440	                endif
				;441	
				;442	                if      TouchKeyAmount > 29
				;443	                ;-KEY30 THRESHOLD
				;444	                MOV     A,Key30Threshold
				;445	                MOV     _GLOBE_VARIES[32],A
				;446	                endif
				;447	
				;448	                if      TouchKeyAmount > 30
				;449	                ;-KEY31 THRESHOLD
				;450	                MOV     A,Key31Threshold
				;451	                MOV     _GLOBE_VARIES[33],A
				;452	                endif
				;453	
				;454	                if      TouchKeyAmount > 31
				;455	                ;-KEY32 THRESHOLD
				;456	                MOV     A,Key32Threshold
				;457	                MOV     _GLOBE_VARIES[34],A
				;458	                endif
				;459	
				;460	                if      TouchKeyAmount > 32
				;461	                ;-KEY33 THRESHOLD
				;462	                MOV     A,Key33Threshold
				;463	                MOV     _GLOBE_VARIES[35],A
				;464	                endif
				;465	
				;466	                if      TouchKeyAmount > 33
				;467	                ;-KEY34 THRESHOLD
				;468	                MOV     A,Key34Threshold
				;469	                MOV     _GLOBE_VARIES[36],A
				;470	                endif
				;471	
				;472	                if      TouchKeyAmount > 34
				;473	                ;-KEY35 THRESHOLD
				;474	                MOV     A,Key35Threshold
				;475	                MOV     _GLOBE_VARIES[37],A
				;476	                endif
				;477	
				;478	                if      TouchKeyAmount > 35
				;479	                ;-KEY36 THRESHOLD
				;480	                MOV     A,Key36Threshold
				;481	                MOV     _GLOBE_VARIES[38],A
				;482	                endif
				;483	
				;484	
				;485	                RET
0524	0003	ret
0525	B0A0	dc	0B0A0H
0526	D0C0	dc	0D0C0H
0527	F0E0	dc	0F0E0H
0528	0C03	xor     a, 3H
0529	0202	sub     a, [02H]
052A	0202	sub     a, [02H]
052B	184E	rla     TKM116DL
052C	0028	dc	00028H
				;486	
				;487	
				;488	
				;489	
				;490	                END
				;491	
				;492	
				;493	
				;file D:\Git_project\Touch-Slave\USER_PROGRAM\USER_PROGRAM.C
				;1	#include    "USER_PROGRAM.H"         
				;2	#include    "TOUCH_SLAVE_CONF.H"  
				;3	
				;4	#if	 (USE_MCU_TYPE == BS83B08A)
				;5		//I2C size
				;6		#define I2C_MAXNUM		8
				;7		//page size
				;8		const u8 IC_PAGE_SIZS[]={3,8,1,2,1,2};
				;9	
				;10	#elif (USE_MCU_TYPE == BS83B12A)
				;11		//I2C size
				;12		#define I2C_MAXNUM		12
				;13		//page size
				;14		const u8 IC_PAGE_SIZS[]={3,12,2,2,2,2};
				;15	
				;16	#elif (USE_MCU_TYPE == BS83B16A)
				;17		//I2C size
				;18		#define I2C_MAXNUM		16
				;19		//page size
				;20		const u8 IC_PAGE_SIZS[]={3,16,2,2,2,2};
				;21		
				;22	#endif
				;23	
				;24	#ifdef	USE_WAKEUP_PIN		
				;25	
				;26		#define MCU_WAKEUP_PU 		_papu4
				;27		#define MCU_WAKEUP_C 		_pac4
				;28		#define MCU_WAKEUP  		_pa4
				;29		
				;30	#endif
				;31	
				;32	//++++++++++++++++++++++MAIN PROGAM+++++++++++++++++++++++
				;33	
				;34	#define NTH 	0x0F
				;35	#define RESET 	0x0A
				;36	
				;37	const u8 IC_PAGE_HEAD[]={0xA0,0xB0,0xC0,0xD0,0xE0,0xF0};
				;38	
				;39	#define TRUE 	1
				;40	#define FALSE 	0
				;41	
				;42	_TKS_FLAGA_type      FLAG;
				;43	#define FLAG_I2C_Err    FLAG.bits.b0
				;44	#define FLAG_I2C_End    FLAG.bits.b1
				;45	//#define          	FLAG.bits.b2
				;46	//#define       	FLAG.bits.b3
				;47	//#define           FLAG.bits.b4
				;48	//#define           FLAG.bits.b5
				;49	//#define           FLAG.bits.b6
				;50	
				;51	struct I2C_LIST
				;52	{
				;53	//FOR HEAD
				;54		vu8 WordAddr;		
				;55		vu8 SUM;	
				;56		vu8 TxNum;
				;57		vu8 RxNum;
				;58		vu8 CheckSum;
				;59		vu8 CheckSum_Buf;		
				;60	}I2C;
				;61	
				;62	u8 I2C_Data[I2C_MAXNUM];
				;63	
				;64	u8 MCU_INF[3];
				;65	#define MCU_STATE 		MCU_INF[0]
				;66	#define MCU_SLEEP 		MCU_INF[1]
				;67	//#define MCU_WAKEUP 		MCU_INF[2]
				;68	//#define MCU_STATE 		MCU_INF[3]
				;69	//#define MCU_STATE 		MCU_INF[4]
				;70	
				;71	u8 SYS_INF[3];
				;72	#define I2C_STATE 		SYS_INF[0]
				;73	#define SYS_Version		SYS_INF[1]
				;74	//#define MCU_WAKEUP 		SYS_INF[2]
				;75	//#define MCU_STATE 		SYS_INF[3]
				;76	//#define MCU_STATE 		SYS_INF[4]
				;77	//u8 I2C_STATE;
				;78	
				;79	void DATA_LIST_UPDATA(void)
				;80	{
				;81		u8 *p;
				;82		
				;83		I2C.SUM = IC_PAGE_SIZS[I2C.WordAddr];//取量
				_DATA_LIST_UPDATA:
				_DATA_LIST_UPDATA:
052D	0F50	mov     a, 50H
052E	4340	add     a, I2C[0]
052F	0083	mov     MP1, a
0530	0F8A	mov     a, 8AH
0531	1F01	clr     MP0
0532	1381	adcm    a, MP0
0533	273D	call    L073D
0534	40C1	mov     I2C[1], a
				;84		
				;85	   	switch(I2C.WordAddr)//取的指
0535	4740	mov     a, I2C[0]
0536	40D5	mov     _DATA_LIST_UPDATA_2, a
0537	4755	mov     a, _DATA_LIST_UPDATA_2
0538	0A00	sub     a, 0H
0539	3D0A	sz      Z
053A	2D51	jmp     _L11
053B	0A01	sub     a, 1H
053C	3D0A	sz      Z
053D	2D56	jmp     _L9
053E	4755	mov     a, _DATA_LIST_UPDATA_2
053F	0A02	sub     a, 2H
0540	3D0A	sz      Z
0541	2D4B	jmp     _L5
0542	4755	mov     a, _DATA_LIST_UPDATA_2
0543	0A03	sub     a, 3H
0544	390A	snz     Z
0545	2D50	jmp     _L10
				;86		{
				;87			case 0 :p = &GLOBE_VARIES[0];break;
				;88			case 1 :p = &GLOBE_VARIES[3];break;
				_L9:
0556	0F63	mov     a, 63H
0557	40CA	mov     rb, a
0558	0F00	mov     a, 0H
0559	40CB	mov     rc, a
				;89			case 2 :p = &KEY_IO_SEL[0];break;
				_L5:
054B	0F7A	mov     a, 7AH
054C	40CA	mov     rb, a
054D	0F00	mov     a, 0H
054E	40CB	mov     rc, a
054F	2D5A	jmp     _L4
				;90			case 3 :p = &MCU_STATE;break;
0546	0FB1	mov     a, B1H
0547	40CA	mov     rb, a
0548	0F00	mov     a, 0H
0549	40CB	mov     rc, a
054A	2D5A	jmp     _L4
				;91			default :p = &GLOBE_VARIES[0];I2C.SUM = 0;break;
				_L10:
0550	5F41	clr     I2C[1]
				_L11:
0551	0F60	mov     a, 60H
0552	40CA	mov     rb, a
0553	0F00	mov     a, 0H
0554	40CB	mov     rc, a
0555	2D5A	jmp     _L4
				;92		}
				;93		
				;94		
				;95		for(I2C.RxNum=0;I2C.RxNum<I2C.SUM;I2C.RxNum++)
				_L4:
055A	5F43	clr     I2C[3]
055B	2D6F	jmp     _L7
056E	54C3	inc     I2C[3]
				_L7:
056F	4743	mov     a, I2C[3]
0570	4241	sub     a, I2C[1]
0571	380A	snz     C
0572	2D5C	jmp     _L8
0573	0003	ret
				;96		{	
				;97			*(p+I2C.RxNum) = I2C_Data[I2C.RxNum];	//更新|控
				_L8:
055C	0FB4	mov     a, B4H
055D	4343	add     a, I2C[3]
055E	0083	mov     MP1, a
055F	0F00	mov     a, 0H
0560	1F01	clr     MP0
0561	1381	adcm    a, MP0
0562	273D	call    L073D
0563	40C9	mov     ra, a
0564	4743	mov     a, I2C[3]
0565	434A	add     a, rb
0566	0083	mov     MP1, a
0567	1F05	clr     ACC
0568	534B	adc     a, rc
0569	0081	mov     MP0, a
056A	0701	mov     a, MP0
056B	0084	mov     BP, a
056C	4749	mov     a, ra
056D	0082	mov     [02H], a
				;98		}	
				;99		
				;100	}
				;101	
				;102	//初始化I2C
				;103	void I2C_LIST_INIT(void)
				;104	{
				;105		I2C.WordAddr = 0x00;
				_I2C_LIST_INIT:
				_I2C_LIST_INIT:
0574	5F40	clr     I2C[0]
				;106		I2C.SUM = 0;	
0575	5F41	clr     I2C[1]
				;107		I2C.RxNum = 0;
0576	5F43	clr     I2C[3]
				;108		I2C.TxNum = 0;
0577	5F42	clr     I2C[2]
				;109		I2C.CheckSum = 0;
0578	5F44	clr     I2C[4]
				;110		I2C.CheckSum_Buf = 0;
0579	5F45	clr     I2C[5]
				;111		FLAG_I2C_End = FALSE;
057A	74C6	clr     FLAG[0].1
				;112		FLAG_I2C_Err = FALSE;
057B	7446	clr     FLAG[0].0
057C	0003	ret
				;113	}
				;114	
				;115	//初始化系y
				;116	void SYS_LIST_INIT(void)
				;117	{
				;118		MCU_STATE = NTH;
				_SYS_LIST_INIT:
				_SYS_LIST_INIT:
057D	0F0F	mov     a, FH
057E	40B1	mov     MCU_INF[0], a
				;119		MCU_SLEEP = SleepTime; // 3s 
057F	0F4E	mov     a, 4EH
0580	40B2	mov     MCU_INF[1], a
				;120		
				;121		I2C_STATE = NTH;
0581	0F0F	mov     a, FH
0582	40AE	mov     SYS_INF[0], a
				;122		SYS_Version = Version;
0583	0F18	mov     a, 18H
0584	40AF	mov     SYS_INF[1], a
				;123		FLAG_I2C_Err = TRUE;//使用通信e`功能初始化I2C
0585	7046	set     FLAG[0].0
0586	0003	ret
				;124	}
				;125	
				;126	//==============================================
				;127	void USER_PROGRAM_INITIAL()
				;128	{	
				;129	//	_wdtc = 0b10101100;	//wdt = 1s 
				;130		
				;131		_pawu = 0;		//0:禁止下降沿唤醒;   1:使能
				_USER_PROGRAM_INITIAL:
				_USER_PROGRAM_INITIAL:
0587	1F17	clr     PAWU
				;132		_papu = 0;		//0:禁止上拉;         1:使能上拉
0588	1F16	clr     PAPU
				;133		
				;134		_pa = 0x00;	
0589	1F14	clr     PA
				;135		_pac = 0xFF;		//0:输出;      		  1:输入
058A	1F95	set     PAC
				;136	
				;137	
				;138	#if	(USE_INT_PIN)		
				;139		 
				;140		MCU_INT = 1;		
058B	3094	set     PA1
				;141		MCU_INT_C = 0;	
058C	3495	clr     PAC1
				;142		
				;143	#endif 	
				;144		
				;145		
				;146	#if (USE_WAKEUP_PIN)	
				;147	
				;148		if(MCU_WAKEUP_TYPE != 0x01)		
				;149			MCU_WAKEUP_PU = 1;	
058D	3216	set     PAPU4
				;150		else 
				;151			MCU_WAKEUP_PU = 0;	
				;152		MCU_WAKEUP_C = 1;	
058E	3215	set     PAC4
				;153		_integ = MCU_WAKEUP_TYPE;
058F	0F02	mov     a, 2H
0590	008D	mov     INTEG, a
				;154		_intf = 0;
0591	360E	clr     INTF
				;155		_inte = 1;
0592	308E	set     INTE
				;156		
				;157	#endif 
				;158		
				;159		
				;160	//配置定时器	
				;161	//	_tmrc = 0b00000111;//12Mhz,1/128
				;162	//	_tmr = 131;//256-156=100,1/12M*128=10.7us; 10.7us*100=1.07ms
				;163	//	_te = 1;	//定时/计数器中断控制位
				;164	//	_ton = 1;	//定时/计数器启动/停止控制位
				;165	#if (USE_WAKEUP_PIN)		
				;166	
				;167		_papu0 = 1;  	//SDA
0593	3016	set     PAPU0
				;168		_papu2 = 1;  	//SCL
0594	3116	set     PAPU2
				;169		
				;170	#endif	
				;171		
				;172	//配置IIC	
				;173		_simc0 = 0b11000010;
0595	0FC2	mov     a, C2H
0596	00A4	mov     SIMC0, a
				;174		_sima = I2C_Address;//从机地址
0597	0F28	mov     a, 28H
0598	00A7	mov     SIMC2, a
				;175		
				;176	//I2C超时配置	
				;177		_i2ctoc = 0b10111111; //64ms
0599	0FBF	mov     a, BFH
059A	00A3	mov     I2CTOC, a
				;178		_simf = 0;
059B	360F	clr     SIMF
				;179		_sime = 1;	
059C	300F	set     SIME
				;180		
				;181		SYS_LIST_INIT();
059D	257D	call    _SYS_LIST_INIT
				;182	
				;183		_emi = 1;	//总中断控制位	
059E	300E	set     EMI
059F	0003	ret
				;184	}
				;185	
				;186	//==============================================
				;187	//**********************************************
				;188	//==============================================
				;189	void USER_PROGRAM()
				;190	{
				;191	
				;192	//--------------------------------------------------------------------	
				;193		GET_KEY_BITMAP();//更新按I值
				_USER_PROGRAM:
				_USER_PROGRAM:
05A0	24AE	call    L04AE
				;194		
				;195		#if (USE_MCU_TYPE == BS83B12A) || \
				;196			(USE_MCU_TYPE == BS83B16A)		
				;197		
				;198		//取使能的按I值
				;199		KEY_DATA[0] = KEY_DATA[0]&KEY_IO_SEL[0] ;
05A1	077A	mov     a, __sima[83]
05A2	067C	and     a, __sima[85]
05A3	40CA	mov     rb, a
05A4	474A	mov     a, rb
05A5	00FC	mov     __sima[85], a
				;200		KEY_DATA[1] = KEY_DATA[1]&KEY_IO_SEL[1] ;	
05A6	077B	mov     a, __sima[84]
05A7	067D	and     a, __sima[86]
05A8	40C9	mov     ra, a
05A9	4749	mov     a, ra
05AA	00FD	mov     __sima[86], a
				;201		//有按I按下INT低
				;202		 if(KEY_DATA[0] || KEY_DATA[1]) 
05AB	50CA	sz      rb
05AC	2DB0	jmp     _L17
05AD	50C9	sz      ra
05AE	2DB0	jmp     _L17
05AF	2DB4	jmp     _L18
				;203		 {
				;204			MCU_INT = 0;
				_L17:
				_LI1:
05B0	3494	clr     PA1
				;205			STANDBY_TIME = 0x7F;
05B1	0F7F	mov     a, 7FH
05B2	00F8	mov     __sima[81], a
05B3	2DBA	jmp     _L19
				;206		 }
				;207	  	 else
				;208	  	 {
				;209		 	MCU_INT = 1;
				_L18:
05B4	3094	set     PA1
				;210		 	
				;211	 		if(STANDBY_TIME <= MCU_SLEEP ) // 7E - 3*1000/63 
05B5	4732	mov     a, MCU_INF[1]
05B6	0278	sub     a, __sima[81]
05B7	380A	snz     C
05B8	2DBA	jmp     _L19
				;212	  	 	{
				;213	  	 		STANDBY_TIME = 0;
05B9	1F78	clr     __sima[81]
				;214	  	 	}
				;215	 	
				;216		 		
				;217	  	 }
				;218		#endif	
				;219		
				;220		
				;221		#if (USE_MCU_TYPE == BS83B08A) 
				;222		//取使能的按I值
				;223		KEY_DATA[0] = KEY_DATA[0]&KEY_IO_SEL[0] ;
				;224		//有按I按下INT低
				;225		 if(KEY_DATA[0]) 
				;226		 {
				;227			MCU_INT = 0;
				;228			STANDBY_TIME = 0x7F;
				;229		 }
				;230	  	 else
				;231	  	 {
				;232		 	MCU_INT = 1;
				;233		 	
				;234	 		if(STANDBY_TIME <= MCU_SLEEP ) // 7E - 3*1000/63 
				;235	  	 	{
				;236	  	 		STANDBY_TIME = 0;
				;237	  	 	}
				;238	  	 }
				;239		#endif		
				;240	
				;241	
				;242		
				;243		if(FLAG_I2C_Err) // 通信e`，臀I2C
				_L19:
05BA	7846	snz     FLAG[0].0
05BB	2DBD	jmp     _L20
				;244		{
				;245			I2C_LIST_INIT();
05BC	2574	call    _I2C_LIST_INIT
				;246		}
				;247	//	----------------------------------------------------------------
				;248		if(FLAG_I2C_End)				//一帧数据接收完成标志
				_L20:
05BD	78C6	snz     FLAG[0].1
05BE	2DE8	jmp     _L16
				;249		{
				;250			//⒌刂忿DQ成a	
				;251			I2C.WordAddr >>= 4;
05BF	5140	swapa   I2C[0]
05C0	0E0F	and     a, FH
05C1	40C0	mov     I2C[0], a
				;252			I2C.WordAddr -= 0x0A;
05C2	0FF6	mov     a, F6H
05C3	43C0	addm    a, I2C[0]
				;253			//接收到的有效
				;254			I2C.RxNum -= 2;
05C4	0FFE	mov     a, FEH
05C5	43C3	addm    a, I2C[3]
				;255		
				;256			//先判 a是否榭的前四 ， 且有效量是否符合大小
				;257			if((I2C.WordAddr <= 3) && (I2C.RxNum == IC_PAGE_SIZS[I2C.WordAddr])) 
05C6	0F03	mov     a, 3H
05C7	4240	sub     a, I2C[0]
05C8	380A	snz     C
05C9	2DE6	jmp     _L22
05CA	0F50	mov     a, 50H
05CB	4340	add     a, I2C[0]
05CC	0083	mov     MP1, a
05CD	0F8A	mov     a, 8AH
05CE	1F01	clr     MP0
05CF	1381	adcm    a, MP0
05D0	273D	call    L073D
05D1	40C9	mov     ra, a
05D2	4743	mov     a, I2C[3]
05D3	4249	sub     a, ra
05D4	390A	snz     Z
05D5	2DE6	jmp     _L22
				;258			{	
				;259				I2C.CheckSum_Buf =~ I2C.CheckSum_Buf;//取反党龅
05D6	4145	cpla    I2C[5]
05D7	40C5	mov     I2C[5], a
				;260				
				;261				if( I2C.CheckSum == I2C.CheckSum_Buf  )//CCheckSum
05D8	4744	mov     a, I2C[4]
05D9	4245	sub     a, I2C[5]
05DA	390A	snz     Z
05DB	2DE6	jmp     _L22
				;262				{
				;263					I2C_STATE = TRUE; //入正_苏I
05DC	0F01	mov     a, 1H
05DD	40AE	mov     SYS_INF[0], a
				;264					
				;265					DATA_LIST_UPDATA();//更新|控值
05DE	252D	call    _DATA_LIST_UPDATA
				;266					
				;267					
				;268					if(MCU_STATE == RESET)// 系yO置，如果O置臀唬tR上臀
05DF	4731	mov     a, MCU_INF[0]
05E0	0A0A	sub     a, AH
05E1	390A	snz     Z
05E2	2DE7	jmp     _L24
				;269					{
				;270						MCU_INT = 0;
05E3	3494	clr     PA1
				;271						_wdtc = 0xFF;//MCU RESET //64MS
05E4	1F9A	set     WDTC
05E5	2DE7	jmp     _L24
				;272					}
				;273					
				;274					
				;275				}
				;276				else I2C_STATE = FALSE;	//入e`苏I					
				;277			}	
				;278			else I2C_STATE = FALSE;	//入e`苏I	
				_L22:
05E6	5F2E	clr     SYS_INF[0]
				;279				
				;280			FLAG_I2C_End = FALSE;
				_L24:
05E7	74C6	clr     FLAG[0].1
				_L16:
05E8	0003	ret
				;281		}	
				;282	//	----------------------------------------------------------------
				;283	}
				;284	
				;285	
				;286	
				;287	
				;288	void __attribute((interrupt(0x10))) IIC_ISR(void)
				;289	{ 
				@IIC_ISR_code .SECTION 'CODE'
0010	40CC	mov     r110, a
0011	0704	mov     a, BP
0012	40CD	mov     r210, a
0013	2DE9	jmp     _IIC_ISR
				@dummy16 .SECTION 'CODE'
					----
					----
					----
					----
				L0018:
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
				L00A2:
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
				L04AE:
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
				_IIC_ISR:
				_IIC_ISR:
05E9	070A	mov     a, STATUS
05EA	40CE	mov     r310, a
05EB	0703	mov     a, MP1
05EC	40CF	mov     r410, a
05ED	0701	mov     a, MP0
05EE	40D0	mov     r510, a
				;290	 	vu8 data;	
				;291	 	
				;292	 	_simf = 0;		//清零标志位				
05EF	360F	clr     SIMF
				;293	 	if(_i2ctof)//_i2ctof=1:I2C通信超时
05F0	3B23	snz     I2CTOF
05F1	2DF6	jmp     L05F6
				;294	 	{
				;295	 		_i2ctoen = 1;
05F2	33A3	set     I2CTOEN
				;296	 		_i2ctof = 0;
05F3	3723	clr     I2CTOF
				;297	 		FLAG_I2C_Err = TRUE;
05F4	7046	set     FLAG[0].0
05F5	2F1F	jmp     L071F
				;298	 	}
				;299	 	else 
				;300	 		{
				;301				if(_haas)//_haas=1:slave receive SLAVE_ADDR match							
				L05F6:
05F6	3B25	snz     HAAS
05F7	2E40	jmp     L0640
				;302				{
				;303					//地址匹配后，判断主机x位,主机是写从机还是读从机
				;304	
				;305					if(_srw)//srw=1:slave send data to master (frist data).
05F8	3925	snz     SRW
05F9	2E37	jmp     L0637
				;306					{							
				;307						
				;308						if(I2C.WordAddr == 0x00)
05FA	50C0	sz      I2C[0]
05FB	2E01	jmp     L0601
				;309						{
				;310							I2C.SUM = IC_PAGE_SIZS[0];
05FC	0F03	mov     a, 3H
05FD	40C1	mov     I2C[1], a
				;311							I2C.TxNum = IC_PAGE_HEAD[0];
05FE	0FA0	mov     a, A0H
05FF	40C2	mov     I2C[2], a
				;312							I2C.CheckSum_Buf = 0;
0600	5F45	clr     I2C[5]
				;313						}
				;314						
				;315							
				;316						switch(I2C.TxNum)
				L0601:
0601	4742	mov     a, I2C[2]
0602	40D4	mov     data[1], a
0603	4754	mov     a, data[1]
0604	0AA0	sub     a, A0H
0605	3D0A	sz      Z
0606	2E1E	jmp     L061E
0607	0A10	sub     a, 10H
0608	3D0A	sz      Z
0609	2E21	jmp     L0621
060A	4754	mov     a, data[1]
060B	0AC0	sub     a, C0H
060C	3D0A	sz      Z
060D	2E24	jmp     L0624
060E	0A10	sub     a, 10H
060F	3D0A	sz      Z
0610	2E27	jmp     L0627
0611	4754	mov     a, data[1]
0612	0AE0	sub     a, E0H
0613	3D0A	sz      Z
0614	2E2A	jmp     L062A
0615	4754	mov     a, data[1]
0616	0AF0	sub     a, F0H
0617	390A	snz     Z
0618	2E2D	jmp     L062D
				;317						{	
				;318							case 0xA0 :data = GLOBE_VARIES[0];break;
				L061E:
061E	0760	mov     a, __sima[57]
061F	40D3	mov     data[0], a
0620	2E2F	jmp     L062F
				;319							case 0xB0 :data = GLOBE_VARIES[3];;break;
				L0621:
0621	0763	mov     a, __sima[60]
0622	40D3	mov     data[0], a
0623	2E2F	jmp     L062F
				;320							case 0xC0 :data = KEY_IO_SEL[0];break;
				L0624:
0624	077A	mov     a, __sima[83]
0625	40D3	mov     data[0], a
0626	2E2F	jmp     L062F
				;321							case 0xD0 :data = MCU_INF[0];break;
				L0627:
0627	4731	mov     a, MCU_INF[0]
0628	40D3	mov     data[0], a
0629	2E2F	jmp     L062F
				;322							case 0xE0 :data = KEY_DATA[0];break;
				L062A:
062A	077C	mov     a, __sima[85]
062B	40D3	mov     data[0], a
062C	2E2F	jmp     L062F
				;323							case 0xF0 :data =  SYS_INF[0]; SYS_INF[0] = NTH;break;
0619	472E	mov     a, SYS_INF[0]
061A	40D3	mov     data[0], a
061B	0F0F	mov     a, FH
061C	40AE	mov     SYS_INF[0], a
061D	2E2F	jmp     L062F
				;324							default : data = 0xAA;;break;
				L062D:
062D	0FAA	mov     a, AAH
062E	40D3	mov     data[0], a
				;325						}
				;326						_htx = 1; //_htx=1:	
				L062F:
062F	3225	set     HTX
				;327						_simd = data;
0630	4753	mov     a, data[0]
0631	00A6	mov     SIMD, a
				;328						
				;329						I2C.CheckSum_Buf += data;
0632	4753	mov     a, data[0]
0633	43C5	addm    a, I2C[5]
				;330						
				;331						I2C.SUM += I2C.TxNum;
0634	4742	mov     a, I2C[2]
0635	43C1	addm    a, I2C[1]
0636	2EC8	jmp     L06C8
				;332						
				;333						I2C.TxNum++;
				;334						if(I2C.TxNum >= I2C.SUM) 
				;335							I2C.TxNum = 0xFF;
				;336								
				;337					}else//srw=0:slave receive data for master
				;338						{	
				;339							_htx = 0;//_htx=0:
				L0637:
0637	3625	clr     HTX
				;340							_txak = 0;//_txak=0:slave enable ACK
0638	35A5	clr     TXAK
				;341							_acc = _simd;//dummy
0639	0726	mov     a, SIMD
063A	0085	mov     ACC, a
				;342							
				;343							I2C.RxNum = 0;//begin to conut
063B	5F43	clr     I2C[3]
				;344							I2C.TxNum = 0;
063C	5F42	clr     I2C[2]
				;345							I2C.SUM = 0;
063D	5F41	clr     I2C[1]
				;346							FLAG_I2C_End = FALSE;
063E	74C6	clr     FLAG[0].1
063F	2F1F	jmp     L071F
				;347						} 
				;348				}
				;349				else//_haas=0:slave receive SLAVE_ADDR match,then communication data 
				;350				{	
				;351											  
				;352					if(_htx)//_htx=1:slave send data to master
				L0640:
0640	3A25	snz     HTX
0641	2ECF	jmp     L06CF
				;353					{								
				;354						if(_rxak)//_rxak=1:slave send data,then master NACK;
0642	3825	snz     RXAK
0643	2E4C	jmp     L064C
				;355						{							
				;356							_htx = 0;
0644	3625	clr     HTX
				;357							_txak = 0;	
0645	35A5	clr     TXAK
				;358							_acc = _simd;//dummy
0646	0726	mov     a, SIMD
0647	0085	mov     ACC, a
				;359	
				;360							I2C.WordAddr = 0x00;
0648	5F40	clr     I2C[0]
				;361							I2C.SUM = 0;
0649	5F41	clr     I2C[1]
				;362							I2C.TxNum = 0;
064A	5F42	clr     I2C[2]
064B	2F1F	jmp     L071F
				;363						}
				;364						else//_rxak=1:slave send data,then master ACK
				;365						{				
				;366							//slave continue to send data to master (second and next data).							
				;367							switch(I2C.TxNum)
				L064C:
064C	4742	mov     a, I2C[2]
064D	40D4	mov     data[1], a
064E	4754	mov     a, data[1]
064F	0AA1	sub     a, A1H
0650	3D0A	sz      Z
0651	2E8F	jmp     L068F
0652	0A01	sub     a, 1H
0653	3D0A	sz      Z
0654	2E92	jmp     L0692
0655	4754	mov     a, data[1]
0656	0AB1	sub     a, B1H
0657	3D0A	sz      Z
0658	2E95	jmp     L0695
0659	0A01	sub     a, 1H
065A	3D0A	sz      Z
065B	2E98	jmp     L0698
065C	4754	mov     a, data[1]
065D	0AB3	sub     a, B3H
065E	3D0A	sz      Z
065F	2E9B	jmp     L069B
0660	0A01	sub     a, 1H
0661	3D0A	sz      Z
0662	2E9E	jmp     L069E
0663	4754	mov     a, data[1]
0664	0AB5	sub     a, B5H
0665	3D0A	sz      Z
0666	2EA1	jmp     L06A1
0667	0A01	sub     a, 1H
0668	3D0A	sz      Z
0669	2EA4	jmp     L06A4
066A	4754	mov     a, data[1]
066B	0AB7	sub     a, B7H
066C	3D0A	sz      Z
066D	2EA7	jmp     L06A7
066E	0A01	sub     a, 1H
066F	3D0A	sz      Z
0670	2EAA	jmp     L06AA
0671	4754	mov     a, data[1]
0672	0AB9	sub     a, B9H
0673	3D0A	sz      Z
0674	2EAD	jmp     L06AD
0675	0A01	sub     a, 1H
0676	3D0A	sz      Z
0677	2EB0	jmp     L06B0
0678	4754	mov     a, data[1]
0679	0ABB	sub     a, BBH
067A	3D0A	sz      Z
067B	2EB3	jmp     L06B3
067C	0A06	sub     a, 6H
067D	3D0A	sz      Z
067E	2EB6	jmp     L06B6
067F	4754	mov     a, data[1]
0680	0AD1	sub     a, D1H
0681	3D0A	sz      Z
0682	2EB9	jmp     L06B9
0683	0A10	sub     a, 10H
0684	3D0A	sz      Z
0685	2EBC	jmp     L06BC
0686	4754	mov     a, data[1]
0687	0AF1	sub     a, F1H
0688	3D0A	sz      Z
0689	2EBF	jmp     L06BF
068A	5654	siza    data[1]
068B	2EC2	jmp     L06C2
				;368							{
				;369			
				;370							//	case 0xA0 :data = GLOBE_VARIES[0];break;
				;371								case 0xA1 :data = GLOBE_VARIES[1];break;
				L068F:
068F	0761	mov     a, __sima[58]
0690	40D3	mov     data[0], a
0691	2EC4	jmp     L06C4
				;372								case 0xA2 :data = GLOBE_VARIES[2];break;
				L0692:
0692	0762	mov     a, __sima[59]
0693	40D3	mov     data[0], a
0694	2EC4	jmp     L06C4
				;373								
				;374							//	case 0xB0 :data = GLOBE_VARIES[3];;break;
				;375								case 0xB1 :data = GLOBE_VARIES[4];break;	
				L0695:
0695	0764	mov     a, __sima[61]
0696	40D3	mov     data[0], a
0697	2EC4	jmp     L06C4
				;376								case 0xB2 :data = GLOBE_VARIES[5];break; 
				L0698:
0698	0765	mov     a, __sima[62]
0699	40D3	mov     data[0], a
069A	2EC4	jmp     L06C4
				;377								case 0xB3 :data = GLOBE_VARIES[6];break;
				L069B:
069B	0766	mov     a, __sima[63]
069C	40D3	mov     data[0], a
069D	2EC4	jmp     L06C4
				;378								case 0xB4 :data = GLOBE_VARIES[7];break;
				L069E:
069E	0767	mov     a, __sima[64]
069F	40D3	mov     data[0], a
06A0	2EC4	jmp     L06C4
				;379								case 0xB5 :data = GLOBE_VARIES[8];break;
				L06A1:
06A1	0768	mov     a, __sima[65]
06A2	40D3	mov     data[0], a
06A3	2EC4	jmp     L06C4
				;380								case 0xB6 :data = GLOBE_VARIES[9];break;
				L06A4:
06A4	0769	mov     a, __sima[66]
06A5	40D3	mov     data[0], a
06A6	2EC4	jmp     L06C4
				;381								case 0xB7 :data = GLOBE_VARIES[10];break;
				L06A7:
06A7	076A	mov     a, __sima[67]
06A8	40D3	mov     data[0], a
06A9	2EC4	jmp     L06C4
				;382	
				;383								#if (USE_MCU_TYPE == BS83B12A) || \
				;384									(USE_MCU_TYPE == BS83B16A)	
				;385								case 0xB8 :data = GLOBE_VARIES[11];break;
				L06AA:
06AA	076B	mov     a, __sima[68]
06AB	40D3	mov     data[0], a
06AC	2EC4	jmp     L06C4
				;386								case 0xB9 :data = GLOBE_VARIES[12];break;	
				L06AD:
06AD	076C	mov     a, __sima[69]
06AE	40D3	mov     data[0], a
06AF	2EC4	jmp     L06C4
				;387								case 0xBA :data = GLOBE_VARIES[13];break;	
				L06B0:
06B0	076D	mov     a, __sima[70]
06B1	40D3	mov     data[0], a
06B2	2EC4	jmp     L06C4
				;388								case 0xBB :data = GLOBE_VARIES[14];break;
				L06B3:
06B3	076E	mov     a, __sima[71]
06B4	40D3	mov     data[0], a
06B5	2EC4	jmp     L06C4
				;389								
				;390								
				;391									
				;392									#if (USE_MCU_TYPE == BS83B16A)
				;393									case 0xBC :data = GLOBE_VARIES[15];break;
				;394									case 0xBD :data = GLOBE_VARIES[16];break;
				;395									case 0xBE :data = GLOBE_VARIES[17];break;
				;396									case 0xBF :data = GLOBE_VARIES[18];break;
				;397									#endif
				;398								
				;399							//	case 0xC0 :data = KEY_IO_SEL[0];break;
				;400								case 0xC1 :data = KEY_IO_SEL[1];break;
				L06B6:
06B6	077B	mov     a, __sima[84]
06B7	40D3	mov     data[0], a
06B8	2EC4	jmp     L06C4
				;401								
				;402							//	case 0xD0 :data = MCU_INF[0];break;
				;403								case 0xD1 :data = MCU_INF[1];break;
				L06B9:
06B9	4732	mov     a, MCU_INF[1]
06BA	40D3	mov     data[0], a
06BB	2EC4	jmp     L06C4
				;404								
				;405							//	case 0xE0 :data = KEY_DATA[0];break;
				;406								case 0xE1 :data = KEY_DATA[1];break;
				L06BC:
06BC	077D	mov     a, __sima[86]
06BD	40D3	mov     data[0], a
06BE	2EC4	jmp     L06C4
				;407							
				;408								#endif
				;409					
				;410							//	case 0xF0 :data =SYS_INF[0];break;
				;411								case 0xF1 :data = SYS_INF[1];break;	
				L06BF:
06BF	472F	mov     a, SYS_INF[1]
06C0	40D3	mov     data[0], a
06C1	2EC4	jmp     L06C4
				;412								
				;413								case 0xFF :data =~I2C.CheckSum_Buf;break;	
068C	4145	cpla    I2C[5]
068D	40D3	mov     data[0], a
068E	2EC4	jmp     L06C4
				;414									
				;415								default : data = 0xAA ;break;
				L06C2:
06C2	0FAA	mov     a, AAH
06C3	40D3	mov     data[0], a
				;416							}	
				;417							
				;418							_simd = data;
				L06C4:
06C4	4753	mov     a, data[0]
06C5	00A6	mov     SIMD, a
				;419							
				;420							I2C.CheckSum_Buf += data;
06C6	4753	mov     a, data[0]
06C7	43C5	addm    a, I2C[5]
				;421								
				;422							I2C.TxNum++;
				L06C8:
06C8	54C2	inc     I2C[2]
				;423							if(I2C.TxNum >= I2C.SUM) 
06C9	4742	mov     a, I2C[2]
06CA	4241	sub     a, I2C[1]
06CB	380A	snz     C
06CC	2F1F	jmp     L071F
				;424								I2C.TxNum = 0xFF;
06CD	5FC2	set     I2C[2]
06CE	2F1F	jmp     L071F
				;425		
				;426						}			
				;427					}
				;428					else//_htx=0:slave receive data for master
				;429					{//for slave send data to master
				;430						data = _simd;
				L06CF:
06CF	0726	mov     a, SIMD
06D0	40D3	mov     data[0], a
				;431						_txak = 0;
06D1	35A5	clr     TXAK
				;432						
				;433						if(I2C.RxNum < 1)
06D2	50C3	sz      I2C[3]
06D3	2F0A	jmp     L070A
				;434						{
				;435							//for slave send data to master
				;436							//取地址
				;437							I2C.WordAddr = data&0xf0;					
06D4	4753	mov     a, data[0]
06D5	0EF0	and     a, F0H
06D6	40C0	mov     I2C[0], a
				;438		
				;439						   	switch(I2C.WordAddr)
06D7	4740	mov     a, I2C[0]
06D8	40D4	mov     data[1], a
06D9	4754	mov     a, data[1]
06DA	0AB0	sub     a, B0H
06DB	3D0A	sz      Z
06DC	2EF0	jmp     L06F0
06DD	0A10	sub     a, 10H
06DE	3D0A	sz      Z
06DF	2EF5	jmp     L06F5
06E0	4754	mov     a, data[1]
06E1	0AD0	sub     a, D0H
06E2	3D0A	sz      Z
06E3	2EFA	jmp     L06FA
06E4	0A10	sub     a, 10H
06E5	3D0A	sz      Z
06E6	2EFF	jmp     L06FF
06E7	4754	mov     a, data[1]
06E8	0AF0	sub     a, F0H
06E9	390A	snz     Z
06EA	2F04	jmp     L0704
				;440							{	
				;441						//		case 0xA0 :I2C.SUM = IC_PAGE_SIZS[0];I2C.TxNum = IC_PAGE_HEAD[0];break;
				;442								case 0xB0 :I2C.SUM = IC_PAGE_SIZS[1];I2C.TxNum = IC_PAGE_HEAD[1];break;
				L06F0:
06F0	0F0C	mov     a, CH
06F1	40C1	mov     I2C[1], a
06F2	0FB0	mov     a, B0H
06F3	40C2	mov     I2C[2], a
06F4	2F08	jmp     L0708
				;443								case 0xC0 :I2C.SUM = IC_PAGE_SIZS[2];I2C.TxNum = IC_PAGE_HEAD[2];break;
				L06F5:
06F5	0F02	mov     a, 2H
06F6	40C1	mov     I2C[1], a
06F7	0FC0	mov     a, C0H
06F8	40C2	mov     I2C[2], a
06F9	2F08	jmp     L0708
				;444								case 0xD0 :I2C.SUM = IC_PAGE_SIZS[3];I2C.TxNum = IC_PAGE_HEAD[3];break;
				L06FA:
06FA	0F02	mov     a, 2H
06FB	40C1	mov     I2C[1], a
06FC	0FD0	mov     a, D0H
06FD	40C2	mov     I2C[2], a
06FE	2F08	jmp     L0708
				;445								case 0xE0 :I2C.SUM = IC_PAGE_SIZS[4];I2C.TxNum = IC_PAGE_HEAD[4];break;
				L06FF:
06FF	0F02	mov     a, 2H
0700	40C1	mov     I2C[1], a
0701	0FE0	mov     a, E0H
0702	40C2	mov     I2C[2], a
0703	2F08	jmp     L0708
				;446								case 0xF0 :I2C.SUM = IC_PAGE_SIZS[5];I2C.TxNum = IC_PAGE_HEAD[5];break;
06EB	0F02	mov     a, 2H
06EC	40C1	mov     I2C[1], a
06ED	0FF0	mov     a, F0H
06EE	40C2	mov     I2C[2], a
06EF	2F08	jmp     L0708
				;447								default   :I2C.SUM = IC_PAGE_SIZS[0];I2C.TxNum = IC_PAGE_HEAD[0];break;
				L0704:
0704	0F03	mov     a, 3H
0705	40C1	mov     I2C[1], a
0706	0FA0	mov     a, A0H
0707	40C2	mov     I2C[2], a
				;448							}
				;449							I2C.CheckSum_Buf = 0;
				L0708:
0708	5F45	clr     I2C[5]
0709	2F1E	jmp     L071E
				;450							I2C.RxNum++;
				;451	
				;452						}
				;453						else if(I2C.RxNum <= I2C.SUM)
				L070A:
070A	4741	mov     a, I2C[1]
070B	4243	sub     a, I2C[3]
070C	380A	snz     C
070D	2F1B	jmp     L071B
				;454							 { 
				;455								I2C_Data[I2C.RxNum - 1] = data;
070E	0FB3	mov     a, B3H
070F	4343	add     a, I2C[3]
0710	0083	mov     MP1, a
0711	0F00	mov     a, 0H
0712	1F01	clr     MP0
0713	1381	adcm    a, MP0
0714	0701	mov     a, MP0
0715	0084	mov     BP, a
0716	4753	mov     a, data[0]
0717	0082	mov     [02H], a
				;456								I2C.CheckSum_Buf += data;
0718	4753	mov     a, data[0]
0719	43C5	addm    a, I2C[5]
071A	2F1E	jmp     L071E
				;457								I2C.RxNum++;
				;458							 }
				;459							 else 
				;460							 {
				;461							 	I2C.CheckSum = data;
				L071B:
071B	4753	mov     a, data[0]
071C	40C4	mov     I2C[4], a
				;462							 	FLAG_I2C_End = TRUE;
071D	70C6	set     FLAG[0].1
				;463							 	I2C.RxNum++;
				L071E:
071E	54C3	inc     I2C[3]
				L071F:
071F	474D	mov     a, r210
0720	0084	mov     BP, a
0721	474E	mov     a, r310
0722	008A	mov     STATUS, a
0723	474F	mov     a, r410
0724	0083	mov     MP1, a
0725	4750	mov     a, r510
0726	0081	mov     MP0, a
0727	474C	mov     a, r110
0728	0004	reti
				;464							 }
				;465							 
				;466							
				;467					}		
				;468				}
				;469			}	
				;470	}
				;471	
				;472	
				;473	
				;474	
				;475	void __attribute((interrupt(0x04))) ISR_INT (void)
				;476	{		
				@ISR_INT_code .SECTION 'CODE'
0004	40D1	mov     r104, a
0005	070A	mov     a, STATUS
0006	40D2	mov     r204, a
0007	2F29	jmp     _ISR_INT
				@dummy4 .SECTION 'CODE'
					----
					----
000A	0000	nop
000B	0000	nop
000C	0000	nop
000D	0000	nop
000E	0000	nop
000F	0000	nop
				;477		
				;478		_intf = 0;
				_ISR_INT:
				_ISR_INT:
0729	360E	clr     INTF
				;479		STANDBY_TIME = 0x7F;
072A	0F7F	mov     a, 7FH
072B	00F8	mov     __sima[81], a
				;480		GCC_DELAY(1000);
072C	0FF9	mov     a, F9H
072D	2738	call    L0738
072E	4752	mov     a, r204
072F	008A	mov     STATUS, a
0730	4751	mov     a, r104
0731	0004	reti
0732	0000	nop
0733	0000	nop
0734	0000	nop
0735	0000	nop
0736	0000	nop
0737	0000	nop
				L0738:
0738	0000	nop
0739	1785	sdz     ACC
073A	2F38	jmp     L0738
073B	0003	ret
073C	1483	inc     MP1
				L073D:
073D	3F81	sz      MP0.7
073E	2F43	jmp     L0743
073F	0701	mov     a, MP0
0740	0084	mov     BP, a
0741	0702	mov     a, [02H]
0742	0003	ret
				L0743:
0743	1B01	rrca    MP0
0744	0E3F	and     a, 3FH
0745	0089	mov     TBHP, a
0746	1B03	rrca    MP1
0747	0087	mov     TBLP, a
0748	1D05	tabrd   ACC
0749	3C0A	sz      C
074A	0708	mov     a, TBLH
074B	0003	ret
				;481		
				;482	}
				;483	
				;484	
				data .SECTION 'DATA'
				__acc DB DUP (?) ; __acc
				__integ DB DUP (?) ; __integ
				__intc0 DB DUP (?) ; __intc0
				__intc1 DB DUP (?) ; __intc1
				__pa DB DUP (?) ; __pa
				__pac DB DUP (?) ; __pac
				__papu DB DUP (?) ; __papu
				__pawu DB DUP (?) ; __pawu
				__wdtc DB DUP (?) ; __wdtc
				__i2ctoc DB DUP (?) ; __i2ctoc
				__simc0 DB DUP (?) ; __simc0
				__simc1 DB DUP (?) ; __simc1
				__simd DB DUP (?) ; __simd
				__sima DB DUP (?) ; __sima
				SYS_INF DB DUP (?) ; SYS_INF
				MCU_INF DB DUP (?) ; MCU_INF
				I2C_Data DB DUP (?) ; I2C_Data
				I2C DB DUP (?) ; I2C
				FLAG DB DUP (?) ; FLAG
				POR_ID DB DUP (?) ; POR_ID
				ra DB DUP (?)
				rb DB DUP (?)
				rc DB DUP (?)
				r110 DB DUP (?)
				r210 DB DUP (?)
				r310 DB DUP (?)
				r410 DB DUP (?)
				r510 DB DUP (?)
				r104 DB DUP (?)
				r204 DB DUP (?)
				data DB DUP (?) ; data
				_DATA_LIST_UPDATA_2 DB DUP (?)
