				;file D:\Git_project\Touch-Slave\MAIN_PROGRAM_V103\MAIN_PROGRAM_V103.asm
				;1	
				;2	message '****************************************************************'
				;3	message '*PROJECT NAME :MAIN PROGRAM V103                               *'
				;4	message '*     VERSION :V103                                            *'
				;5	message '* ICE VERSION :                                                *'
				;6	message '*      DATE   :20160302                                        *'
				;7	message '*      REMARK :V103 add 33~36 key                              *'
				;8	message '****************************************************************'
				;9	                ;=INCLUDE REFERENCE FILE
				;10	                INCLUDE MAIN_PROGRAM_V103.INC
				;11	
				;12	                ;-PUBLIC LABEL
				;13	                PUBLIC  _LOAD_TKS_GLOBE_VARIES
				;14	                PUBLIC  _LOAD_HXT_REFERENCE
				;15	
				;16	CALL_   MACRO   FUNCTION
				;17	        ifdef   FUNCTION
				;18	                ifdef   PBP
				;19	                MOV     A,bank FUNCTION
				;20	                MOV     PBP,A
				;21	                endif
				;22	                CALL    FUNCTION
				;23	        endif
				;24	                ENDM
				;25	
				;26	EXTEND_FUNCTION_INITIAL MACRO
				;27	                CALL_   EXTEND_FUNCTION_1A_INITIAL
				;28	                CALL_   EXTEND_FUNCTION_1B_INITIAL
				;29	                CALL_   EXTEND_FUNCTION_1C_INITIAL
				;30	                CALL_   EXTEND_FUNCTION_1D_INITIAL
				;31	                CALL_   EXTEND_FUNCTION_1E_INITIAL
				;32	                CALL_   EXTEND_FUNCTION_1F_INITIAL
				;33	                CALL_   EXTEND_FUNCTION_1G_INITIAL
				;34	                CALL_   EXTEND_FUNCTION_1H_INITIAL
				;35	
				;36	                CALL_   EXTEND_FUNCTION_2A_INITIAL
				;37	                CALL_   EXTEND_FUNCTION_2B_INITIAL
				;38	                CALL_   EXTEND_FUNCTION_2C_INITIAL
				;39	                CALL_   EXTEND_FUNCTION_2D_INITIAL
				;40	                CALL_   EXTEND_FUNCTION_2E_INITIAL
				;41	                CALL_   EXTEND_FUNCTION_2F_INITIAL
				;42	                CALL_   EXTEND_FUNCTION_2G_INITIAL
				;43	                CALL_   EXTEND_FUNCTION_2H_INITIAL
				;44	                ENDM
				;45	
				;46	EXTEND_FUNCTION MACRO
				;47	                CALL_   EXTEND_FUNCTION_1A
				;48	                CALL_   EXTEND_FUNCTION_1B
				;49	                CALL_   EXTEND_FUNCTION_1C
				;50	                CALL_   EXTEND_FUNCTION_1D
				;51	                CALL_   EXTEND_FUNCTION_1E
				;52	                CALL_   EXTEND_FUNCTION_1F
				;53	                CALL_   EXTEND_FUNCTION_1G
				;54	                CALL_   EXTEND_FUNCTION_1H
				;55	
				;56	                CALL_   EXTEND_FUNCTION_2A
				;57	                CALL_   EXTEND_FUNCTION_2B
				;58	                CALL_   EXTEND_FUNCTION_2C
				;59	                CALL_   EXTEND_FUNCTION_2D
				;60	                CALL_   EXTEND_FUNCTION_2E
				;61	                CALL_   EXTEND_FUNCTION_2F
				;62	                CALL_   EXTEND_FUNCTION_2G
				;63	                CALL_   EXTEND_FUNCTION_2H
				;64	                ENDM
				;65	                ;==============
				;66	                ;=DATA SETCTION
				;67	                ;==============
				;68	MAIN_DATA       .SECTION          'DATA'
				;69	
				;70	ifndef  ESCpowerIDcheck
				;71	POR_ID          DB      2 DUP(?)
				;72	endif
				;73	
				;74	
				;75	
				;76	                ;==============
				;77	                ;=CODE SETCTION
				;78	                ;==============
				;79	PROGRAM_ENTRY   .SECTION  AT 000H 'CODE'
				;80	        ifdef   PBP
				;81	                CLR     PBP
				;82	                ifndef  ESCpowerIDcheck
				;83	                MOV     A,042H      ;ASCII = B
				;84	                endif
				;85	        else
				;86	                ;----------------
				;87	                ;-SET POR ID 1---
				;88	                ;----------------
				;89	                ifndef  ESCpowerIDcheck
				;90	                MOV     A,042H      ;ASCII = B
				PROGRAM_ENTRY:
				include BS83B12A-3.inc
0000	0F42	mov     a, 42H
				;91	                SNZ     TO
0001	3A8A	snz     TO
				;92	                MOV     POR_ID[0],A
0002	40C7	mov     POR_ID, a
				;93	                endif
				;94	        endif
				;95	                JMP     PROGRAM_RESET
0003	2CCE	jmp     PROGRAM_RESET
				;96	
				;97	                ;==============
				;98	                ;=MAIN PROGRAM=
				;99	                ;==============
				;100	MAIN_PROGRAM    .SECTION          'CODE'
				;101	
				;102	                ;;***********************
				;103	PROGRAM_RESET:  ;;* PROGRAM ENTRY *******
				;104	                ;;***********************
				;105	        ifdef   PBP
				;106	                ifndef  ESCpowerIDcheck
				;107	                SNZ     TO
				;108	                MOV     POR_ID[0],A
				;109	                endif
				;110	        endif
				;111	                ;----------------
				;112	                ;-SET POR ID 2---
				;113	                ;----------------
				;114	        ifndef  ESCpowerIDcheck
				;115	                MOV     A,053H      ;ASCII = S
				PROGRAM_RESET:
				MAIN_PROGRAM:
04CE	0F53	mov     a, 53H
				;116	                MOV     POR_ID[1],A
04CF	40C8	mov     POR_ID[1], a
				;117	        endif
				;118	
				;119	
				;120	                ;---------------------
				;121	                ;-MCU HARDWARE INITIAL
				;122	                ;---------------------
				;123	                MCU_HARDWARE_INITIAL
04D0	0F30	mov     a, 30H
04D1	008C	mov     CTRL, a
04D2	0F03	mov     a, 3H
04D3	008B	mov     SMOD, a
04D4	0F52	mov     a, 52H
04D5	009A	mov     WDTC, a
04D6	0F01	mov     a, 1H
04D7	0084	mov     BP, a
04D8	0F80	mov     a, 80H
04D9	24F5	call    CLEAR_RAM
04DA	1F04	clr     BP
04DB	0F60	mov     a, 60H
04DC	24F5	call    CLEAR_RAM
				;124	
				;125	                ;------------------------------
				;126	                ;-LOAD LIBRARY OPTION/THRESHOLD
				;127	                ;------------------------------
				;128	                CALL    _LOAD_TKS_GLOBE_VARIES
04DD	2502	call    _LOAD_HXT_REFERENCE
				;129	
				;130	                ;------------------------
				;131	                ;-EXTEND FUNCTION INITIAL
				;132	                ;------------------------
				;133	                EXTEND_FUNCTION_INITIAL
04DE	20A2	call    L00A2
04DF	2587	call    _USER_PROGRAM_INITIAL
				;134	
				;135	                ;;-----------------------
				;136	MAIN_LOOP:      ;;- MAIN PROGRAM LOOP ---
				;137	                ;;-----------------------
				;138	                CLR     WDT
				MAIN_LOOP:
04E0	0001	clr     wdt
				;139	                CLR     WDT1
04E1	0001	clr     wdt
				;140	                CLR     WDT2
04E2	0005	clr     wdt2
				;141	
				;142	                ;----------------
				;143	                ;-CHECK POR ID --
				;144	                ;----------------
				;145	        ifndef  ESCpowerIDcheck
				;146	                MOV     A,042H
04E3	0F42	mov     a, 42H
				;147	                XORM    A,POR_ID[0]
04E4	44C7	xorm    a, POR_ID
				;148	                MOV     A,053H
04E5	0F53	mov     a, 53H
				;149	                SZ      Z
04E6	3D0A	sz      Z
				;150	                XORM    A,POR_ID[1]
04E7	44C8	xorm    a, POR_ID[1]
				;151	                SNZ     Z
04E8	390A	snz     Z
				;152	                JMP     000H
04E9	2800	jmp     PROGRAM_ENTRY
				;153	        endif
				;154	                ;----------------------
				;155	                ;-RE INITIAL SYS. CLOCK
				;156	                ;----------------------
				;157	                RELOAD_SYS_CLOCK
04EA	0F30	mov     a, 30H
04EB	008C	mov     CTRL, a
04EC	0F03	mov     a, 3H
04ED	008B	mov     SMOD, a
				;158	                EXTEND_FUNCTION
04EE	2018	call    L0018
04EF	259E	call    _USER_PROGRAM
				;159	                ;----------------
				;160	                ;-SET POR ID  ---
				;161	                ;----------------
				;162	        ifndef  ESCpowerIDcheck
				;163	                MOV     A,042H      ;ASCII = B
04F0	0F42	mov     a, 42H
				;164	                MOV     POR_ID[0],A
04F1	40C7	mov     POR_ID, a
				;165	                MOV     A,053H      ;ASCII = S
04F2	0F53	mov     a, 53H
				;166	                MOV     POR_ID[1],A
04F3	40C8	mov     POR_ID[1], a
				;167	        endif
				;168	
				;169	                ;--------------------
				;170	WDT_WAKEUP:     ;-WDT WAKEUP FUNCTION
				;171	                ;--------------------
				;172	                if      PowerSave==1
				;173	                CALL_   _CHECK_KEY_WAKEUP
				;174	                endif
				;175	
				;176	                ifdef   PBP
				;177	                MOV     A,BANK MAIN_LOOP
				;178	                MOV     PBP,A
				;179	                endif
				;180	                JMP     MAIN_LOOP
				WDT_WAKEUP:
04F4	2CE0	jmp     MAIN_LOOP
				;181	
				;182	
				;183	
				;184	
				;185	
				;186	
				;187	
				;188	
				;189	
				;190	;;***********************************************************
				;191	;;*SUB. NAME:                                               *
				;192	;;*INPUT    :                                               *
				;193	;;*OUTPUT   :                                               *
				;194	;;*USED REG.:                                               *
				;195	;;*FUNCTION :                                               *
				;196	;;***********************************************************
				;197	CLEAR_RAM:
				;198	                MOV     MP1,A
				CLEAR_RAM:
04F5	0083	mov     MP1, a
				;199	        ifndef  ESCpowerIDcheck
				;200	            ifdef  BP
				;201	                ;-CHECK BANK
				;202	                SZ      BP
04F6	1084	sz      BP
				;203	                JMP     CLR_RAM
04F7	2CFE	jmp     CLR_RAM
				;204	            endif
				;205	                ;-CHECK POR_ID RAM
				;206	                MOV     A,OFFSET POR_ID
04F8	0FC7	mov     a, C7H
				;207	                XOR     A,MP1
04F9	0403	xor     a, MP1
				;208	                MOV     A,OFFSET POR_ID+1
04FA	0FC8	mov     a, C8H
				;209	                SNZ     Z
04FB	390A	snz     Z
				;210	                XOR     A,MP1
04FC	0403	xor     a, MP1
				;211	                SNZ     Z
04FD	390A	snz     Z
				;212	        endif
				;213	CLR_RAM:        ;-CLEAR RAM
				;214	                CLR     IAR1
				CLR_RAM:
04FE	1F02	clr     [02H]
				;215	                SIZA    MP1
04FF	1603	siza    MP1
				;216	                JMP     CLEAR_RAM
0500	2CF5	jmp     CLEAR_RAM
				;217	
				;218	                RET
0501	0003	ret
				;219	
				;220	
				;221	;;***********************************************************
				;222	;;*SUB. NAME:                                               *
				;223	;;*INPUT    :                                               *
				;224	;;*OUTPUT   :                                               *
				;225	;;*USED REG.:                                               *
				;226	;;*FUNCTION :                                               *
				;227	;;***********************************************************
				;228	_LOAD_TKS_GLOBE_VARIES:
				;229	_LOAD_HXT_REFERENCE:
				;230	                ;------------------------
				;231	                ;-SET TKS LIBRARY OPTION-
				;232	                ;------------------------
				;233	                MOV     A,GlobeOptionA
				_LOAD_HXT_REFERENCE:
				_LOAD_TKS_GLOBE_VARIES:
0502	0F87	mov     a, 87H
				;234	                MOV     _GLOBE_VARIES[0],A
0503	00E0	mov     __sima[57], a
				;235	                MOV     A,GlobeOptionB
0504	0F30	mov     a, 30H
				;236	                MOV     _GLOBE_VARIES[1],A
0505	00E1	mov     __sima[58], a
				;237	                MOV     A,GlobeOptionC
0506	0F98	mov     a, 98H
				;238	                MOV     _GLOBE_VARIES[2],A
0507	00E2	mov     __sima[59], a
				;239	
				;240	                ;--------------------------
				;241	                ;-SET TOUCH OR IO ATTRIBUTE
				;242	                ;--------------------------
				;243	                MOV     A,IO_TOUCH_ATTR&0FFH
0508	0FFF	mov     a, FFH
				;244	                MOV     _KEY_IO_SEL[0],A
0509	00FA	mov     __sima[83], a
				;245	                ;-IF OVER 2 TOUCH IP (8~16KEY)
				;246	                if      TouchKeyAmount > 8
				;247	                MOV     A,(IO_TOUCH_ATTR>>8)&0FFH
050A	0F0F	mov     a, FH
				;248	                MOV     _KEY_IO_SEL[1],A
050B	00FB	mov     __sima[84], a
				;249	                endif
				;250	                ;-IF OVER 4 TOUCH IP (17~24KEY)
				;251	                if      TouchKeyAmount > 16
				;252	                MOV     A,(IO_TOUCH_ATTR>>16)&0FFH
				;253	                MOV     _KEY_IO_SEL[2],A
				;254	                endif
				;255	                ;-IF OVER 6 TOUCH IP (25~32KEY)
				;256	                if      TouchKeyAmount > 24
				;257	                MOV     A,(IO_TOUCH_ATTR>>24)&0FFH
				;258	                MOV     _KEY_IO_SEL[3],A
				;259	                endif
				;260	
				;261	                ;-IF OVER 6 TOUCH IP (33~36KEY)
				;262	                if      TouchKeyAmount > 32
				;263	                MOV     A,IO_TOUCH_ATTR2
				;264	                MOV     _KEY_IO_SEL[4],A
				;265	                endif
				;266	
				;267	                ;------------------------
				;268	                ;-SET TOUCH KEY THRESHOLD
				;269	                ;------------------------
				;270	                ;-KEY1 THRESHOLD
				;271	                MOV     A,Key1Threshold
050C	0F0A	mov     a, AH
				;272	                MOV     _GLOBE_VARIES[3],A
050D	00E3	mov     __sima[60], a
				;273	
				;274	                if      TouchKeyAmount > 1
				;275	                ;-KEY2 THRESHOLD
				;276	                MOV     A,Key2Threshold
050E	0F0A	mov     a, AH
				;277	                MOV     _GLOBE_VARIES[4],A
050F	00E4	mov     __sima[61], a
				;278	                endif
				;279	
				;280	                if      TouchKeyAmount > 2
				;281	                ;-KEY3 THRESHOLD
				;282	                MOV     A,Key3Threshold
0510	0F0A	mov     a, AH
				;283	                MOV     _GLOBE_VARIES[5],A
0511	00E5	mov     __sima[62], a
				;284	                endif
				;285	
				;286	                if      TouchKeyAmount > 3
				;287	                ;-KEY4 THRESHOLD
				;288	                MOV     A,Key4Threshold
0512	0F0A	mov     a, AH
				;289	                MOV     _GLOBE_VARIES[6],A
0513	00E6	mov     __sima[63], a
				;290	                endif
				;291	
				;292	                if      TouchKeyAmount > 4
				;293	                ;-KEY5 THRESHOLD
				;294	                MOV     A,Key5Threshold
0514	0F0A	mov     a, AH
				;295	                MOV     _GLOBE_VARIES[7],A
0515	00E7	mov     __sima[64], a
				;296	                endif
				;297	
				;298	                if      TouchKeyAmount > 5
				;299	                ;-KEY6 THRESHOLD
				;300	                MOV     A,Key6Threshold
0516	0F0A	mov     a, AH
				;301	                MOV     _GLOBE_VARIES[8],A
0517	00E8	mov     __sima[65], a
				;302	                endif
				;303	
				;304	                if      TouchKeyAmount > 6
				;305	                ;-KEY7 THRESHOLD
				;306	                MOV     A,Key7Threshold
0518	0F0A	mov     a, AH
				;307	                MOV     _GLOBE_VARIES[9],A
0519	00E9	mov     __sima[66], a
				;308	                endif
				;309	
				;310	                if      TouchKeyAmount > 7
				;311	                ;-KEY8 THRESHOLD
				;312	                MOV     A,Key8Threshold
051A	0F0A	mov     a, AH
				;313	                MOV     _GLOBE_VARIES[10],A
051B	00EA	mov     __sima[67], a
				;314	                endif
				;315	
				;316	                if     TouchKeyAmount > 8
				;317	                ;-KEY9 THRESHOLD
				;318	                MOV     A,Key9Threshold
051C	0F0A	mov     a, AH
				;319	                MOV     _GLOBE_VARIES[11],A
051D	00EB	mov     __sima[68], a
				;320	                endif
				;321	
				;322	                if      TouchKeyAmount > 9
				;323	                ;-KEY10 THRESHOLD
				;324	                MOV     A,Key10Threshold
051E	0F0A	mov     a, AH
				;325	                MOV     _GLOBE_VARIES[12],A
051F	00EC	mov     __sima[69], a
				;326	                endif
				;327	
				;328	                if      TouchKeyAmount > 10
				;329	                ;-KEY11 THRESHOLD
				;330	                MOV     A,Key11Threshold
0520	0F0A	mov     a, AH
				;331	                MOV     _GLOBE_VARIES[13],A
0521	00ED	mov     __sima[70], a
				;332	                endif
				;333	
				;334	                if      TouchKeyAmount > 11
				;335	                ;-KEY12 THRESHOLD
				;336	                MOV     A,Key12Threshold
0522	0F0A	mov     a, AH
				;337	                MOV     _GLOBE_VARIES[14],A
0523	00EE	mov     __sima[71], a
				;338	                endif
				;339	
				;340	                if      TouchKeyAmount > 12
				;341	                ;-KEY13 THRESHOLD
				;342	                MOV     A,Key13Threshold
				;343	                MOV     _GLOBE_VARIES[15],A
				;344	                endif
				;345	
				;346	                if      TouchKeyAmount > 13
				;347	                ;-KEY14 THRESHOLD
				;348	                MOV     A,Key14Threshold
				;349	                MOV     _GLOBE_VARIES[16],A
				;350	                endif
				;351	
				;352	                if      TouchKeyAmount > 14
				;353	                ;-KEY15 THRESHOLD
				;354	                MOV     A,Key15Threshold
				;355	                MOV     _GLOBE_VARIES[17],A
				;356	                endif
				;357	
				;358	                if      TouchKeyAmount > 15
				;359	                ;-KEY16 THRESHOLD
				;360	                MOV     A,Key16Threshold
				;361	                MOV     _GLOBE_VARIES[18],A
				;362	                endif
				;363	
				;364	                if      TouchKeyAmount > 16
				;365	                ;-KEY17 THRESHOLD
				;366	                MOV     A,Key17Threshold
				;367	                MOV     _GLOBE_VARIES[19],A
				;368	                endif
				;369	
				;370	                if      TouchKeyAmount > 17
				;371	                ;-KEY18 THRESHOLD
				;372	                MOV     A,Key18Threshold
				;373	                MOV     _GLOBE_VARIES[20],A
				;374	                endif
				;375	
				;376	                if      TouchKeyAmount > 18
				;377	                ;-KEY19 THRESHOLD
				;378	                MOV     A,Key19Threshold
				;379	                MOV     _GLOBE_VARIES[21],A
				;380	                endif
				;381	
				;382	                if      TouchKeyAmount > 19
				;383	                ;-KEY20 THRESHOLD
				;384	                MOV     A,Key20Threshold
				;385	                MOV     _GLOBE_VARIES[22],A
				;386	                endif
				;387	
				;388	                if      TouchKeyAmount > 20
				;389	                ;-KEY17 THRESHOLD
				;390	                MOV     A,Key21Threshold
				;391	                MOV     _GLOBE_VARIES[23],A
				;392	                endif
				;393	
				;394	                if      TouchKeyAmount > 21
				;395	                ;-KEY18 THRESHOLD
				;396	                MOV     A,Key22Threshold
				;397	                MOV     _GLOBE_VARIES[24],A
				;398	                endif
				;399	
				;400	                if      TouchKeyAmount > 22
				;401	                ;-KEY19 THRESHOLD
				;402	                MOV     A,Key23Threshold
				;403	                MOV     _GLOBE_VARIES[25],A
				;404	                endif
				;405	
				;406	                if      TouchKeyAmount > 23
				;407	                ;-KEY20 THRESHOLD
				;408	                MOV     A,Key24Threshold
				;409	                MOV     _GLOBE_VARIES[26],A
				;410	                endif
				;411	
				;412	                if      TouchKeyAmount > 24
				;413	                ;-KEY17 THRESHOLD
				;414	                MOV     A,Key25Threshold
				;415	                MOV     _GLOBE_VARIES[27],A
				;416	                endif
				;417	
				;418	                if      TouchKeyAmount > 25
				;419	                ;-KEY18 THRESHOLD
				;420	                MOV     A,Key26Threshold
				;421	                MOV     _GLOBE_VARIES[28],A
				;422	                endif
				;423	
				;424	                if      TouchKeyAmount > 26
				;425	                ;-KEY19 THRESHOLD
				;426	                MOV     A,Key27Threshold
				;427	                MOV     _GLOBE_VARIES[29],A
				;428	                endif
				;429	
				;430	                if      TouchKeyAmount > 27
				;431	                ;-KEY20 THRESHOLD
				;432	                MOV     A,Key28Threshold
				;433	                MOV     _GLOBE_VARIES[30],A
				;434	                endif
				;435	
				;436	                if      TouchKeyAmount > 28
				;437	                ;-KEY29 THRESHOLD
				;438	                MOV     A,Key29Threshold
				;439	                MOV     _GLOBE_VARIES[31],A
				;440	                endif
				;441	
				;442	                if      TouchKeyAmount > 29
				;443	                ;-KEY30 THRESHOLD
				;444	                MOV     A,Key30Threshold
				;445	                MOV     _GLOBE_VARIES[32],A
				;446	                endif
				;447	
				;448	                if      TouchKeyAmount > 30
				;449	                ;-KEY31 THRESHOLD
				;450	                MOV     A,Key31Threshold
				;451	                MOV     _GLOBE_VARIES[33],A
				;452	                endif
				;453	
				;454	                if      TouchKeyAmount > 31
				;455	                ;-KEY32 THRESHOLD
				;456	                MOV     A,Key32Threshold
				;457	                MOV     _GLOBE_VARIES[34],A
				;458	                endif
				;459	
				;460	                if      TouchKeyAmount > 32
				;461	                ;-KEY33 THRESHOLD
				;462	                MOV     A,Key33Threshold
				;463	                MOV     _GLOBE_VARIES[35],A
				;464	                endif
				;465	
				;466	                if      TouchKeyAmount > 33
				;467	                ;-KEY34 THRESHOLD
				;468	                MOV     A,Key34Threshold
				;469	                MOV     _GLOBE_VARIES[36],A
				;470	                endif
				;471	
				;472	                if      TouchKeyAmount > 34
				;473	                ;-KEY35 THRESHOLD
				;474	                MOV     A,Key35Threshold
				;475	                MOV     _GLOBE_VARIES[37],A
				;476	                endif
				;477	
				;478	                if      TouchKeyAmount > 35
				;479	                ;-KEY36 THRESHOLD
				;480	                MOV     A,Key36Threshold
				;481	                MOV     _GLOBE_VARIES[38],A
				;482	                endif
				;483	
				;484	
				;485	                RET
0524	0003	ret
0525	B0A0	dc	0B0A0H
0526	D0C0	dc	0D0C0H
0527	F0E0	dc	0F0E0H
0528	0C03	xor     a, 3H
0529	0202	sub     a, [02H]
052A	0202	sub     a, [02H]
052B	184E	rla     TKM116DL
052C	0028	dc	00028H
				;486	
				;487	
				;488	
				;489	
				;490	                END
				;491	
				;492	
				;493	
				;file D:\Git_project\Touch-Slave\USER_PROGRAM\USER_PROGRAM.C
				;1	#include    "USER_PROGRAM.H"         
				;2	#include    "TOUCH_SLAVE_CONF.H"  
				;3	
				;4	
				;5	#if	 (USE_MCU_TYPE == BS83B08A)
				;6		//I2C size
				;7		#define I2C_MAXNUM		8
				;8		//page size
				;9		const u8 IC_PAGE_SIZS[]={3,8,1,2,1,2};
				;10	
				;11	#elif (USE_MCU_TYPE == BS83B12A)
				;12		//I2C size
				;13		#define I2C_MAXNUM		12
				;14		//page size
				;15		const u8 IC_PAGE_SIZS[]={3,12,2,2,2,2};
				;16	
				;17	#elif (USE_MCU_TYPE == BS83B16A)
				;18		//I2C size
				;19		#define I2C_MAXNUM		16
				;20		//page size
				;21		const u8 IC_PAGE_SIZS[]={3,16,2,2,2,2};
				;22		
				;23	#endif
				;24	
				;25	#ifdef	USE_WAKEUP_PIN		
				;26	
				;27		#define MCU_WAKEUP_PU 		_papu4
				;28		#define MCU_WAKEUP_C 		_pac4
				;29		#define MCU_WAKEUP  		_pa4
				;30		
				;31	#endif
				;32	
				;33	//++++++++++++++++++++++MAIN PROGAM+++++++++++++++++++++++
				;34	
				;35	#define NTH 	0x0F
				;36	#define RESET 	0x0A
				;37	
				;38	const u8 IC_PAGE_HEAD[]={0xA0,0xB0,0xC0,0xD0,0xE0,0xF0};
				;39	
				;40	#define TRUE 	1
				;41	#define FALSE 	0
				;42	
				;43	_TKS_FLAGA_type      FLAG;
				;44	#define FLAG_I2C_Err    FLAG.bits.b0
				;45	#define FLAG_I2C_End    FLAG.bits.b1
				;46	//#define          	FLAG.bits.b2
				;47	//#define       	FLAG.bits.b3
				;48	//#define           FLAG.bits.b4
				;49	//#define           FLAG.bits.b5
				;50	//#define           FLAG.bits.b6
				;51	
				;52	struct I2C_LIST
				;53	{
				;54	//FOR HEAD
				;55		vu8 WordAddr;		
				;56		vu8 SUM;	
				;57		vu8 TxNum;
				;58		vu8 RxNum;
				;59		vu8 CheckSum;
				;60		vu8 CheckSum_Buf;		
				;61	}I2C;
				;62	
				;63	u8 I2C_Data[I2C_MAXNUM];
				;64	
				;65	u8 MCU_INF[3];
				;66	#define MCU_STATE 		MCU_INF[0]
				;67	#define MCU_SLEEP 		MCU_INF[1]
				;68	//#define MCU_WAKEUP 		MCU_INF[2]
				;69	//#define MCU_STATE 		MCU_INF[3]
				;70	//#define MCU_STATE 		MCU_INF[4]
				;71	
				;72	u8 SYS_INF[3];
				;73	#define I2C_STATE 		SYS_INF[0]
				;74	#define SYS_Version		SYS_INF[1]
				;75	//#define MCU_WAKEUP 		SYS_INF[2]
				;76	//#define MCU_STATE 		SYS_INF[3]
				;77	//#define MCU_STATE 		SYS_INF[4]
				;78	//u8 I2C_STATE;
				;79	
				;80	void DATA_LIST_UPDATA(void)
				;81	{
				;82		u8 *p;
				;83		
				;84		I2C.SUM = IC_PAGE_SIZS[I2C.WordAddr];//取量
				_DATA_LIST_UPDATA:
				_DATA_LIST_UPDATA:
052D	0F50	mov     a, 50H
052E	4340	add     a, I2C[0]
052F	0083	mov     MP1, a
0530	0F8A	mov     a, 8AH
0531	1F01	clr     MP0
0532	1381	adcm    a, MP0
0533	273B	call    L073B
0534	40C1	mov     I2C[1], a
				;85		
				;86	   	switch(I2C.WordAddr)//取的指
0535	4740	mov     a, I2C[0]
0536	40D5	mov     _DATA_LIST_UPDATA_2, a
0537	4755	mov     a, _DATA_LIST_UPDATA_2
0538	0A00	sub     a, 0H
0539	3D0A	sz      Z
053A	2D51	jmp     _L11
053B	0A01	sub     a, 1H
053C	3D0A	sz      Z
053D	2D56	jmp     _L9
053E	4755	mov     a, _DATA_LIST_UPDATA_2
053F	0A02	sub     a, 2H
0540	3D0A	sz      Z
0541	2D4B	jmp     _L5
0542	4755	mov     a, _DATA_LIST_UPDATA_2
0543	0A03	sub     a, 3H
0544	390A	snz     Z
0545	2D50	jmp     _L10
				;87		{
				;88			case 0 :p = &GLOBE_VARIES[0];break;
				;89			case 1 :p = &GLOBE_VARIES[3];break;
				_L9:
0556	0F63	mov     a, 63H
0557	40CA	mov     rb, a
0558	0F00	mov     a, 0H
0559	40CB	mov     rc, a
				;90			case 2 :p = &KEY_IO_SEL[0];break;
				_L5:
054B	0F7A	mov     a, 7AH
054C	40CA	mov     rb, a
054D	0F00	mov     a, 0H
054E	40CB	mov     rc, a
054F	2D5A	jmp     _L4
				;91			case 3 :p = &MCU_STATE;break;
0546	0FB1	mov     a, B1H
0547	40CA	mov     rb, a
0548	0F00	mov     a, 0H
0549	40CB	mov     rc, a
054A	2D5A	jmp     _L4
				;92			default :p = &GLOBE_VARIES[0];I2C.SUM = 0;break;
				_L10:
0550	5F41	clr     I2C[1]
				_L11:
0551	0F60	mov     a, 60H
0552	40CA	mov     rb, a
0553	0F00	mov     a, 0H
0554	40CB	mov     rc, a
0555	2D5A	jmp     _L4
				;93		}
				;94		
				;95		
				;96		for(I2C.RxNum=0;I2C.RxNum<I2C.SUM;I2C.RxNum++)
				_L4:
055A	5F43	clr     I2C[3]
055B	2D6F	jmp     _L7
056E	54C3	inc     I2C[3]
				_L7:
056F	4743	mov     a, I2C[3]
0570	4241	sub     a, I2C[1]
0571	380A	snz     C
0572	2D5C	jmp     _L8
0573	0003	ret
				;97		{	
				;98			*(p+I2C.RxNum) = I2C_Data[I2C.RxNum];	//更新|控
				_L8:
055C	0FB4	mov     a, B4H
055D	4343	add     a, I2C[3]
055E	0083	mov     MP1, a
055F	0F00	mov     a, 0H
0560	1F01	clr     MP0
0561	1381	adcm    a, MP0
0562	273B	call    L073B
0563	40C9	mov     ra, a
0564	4743	mov     a, I2C[3]
0565	434A	add     a, rb
0566	0083	mov     MP1, a
0567	1F05	clr     ACC
0568	534B	adc     a, rc
0569	0081	mov     MP0, a
056A	0701	mov     a, MP0
056B	0084	mov     BP, a
056C	4749	mov     a, ra
056D	0082	mov     [02H], a
				;99		}	
				;100		
				;101	}
				;102	
				;103	//初始化I2C
				;104	void I2C_LIST_INIT(void)
				;105	{
				;106		I2C.WordAddr = 0x00;
				_I2C_LIST_INIT:
				_I2C_LIST_INIT:
0574	5F40	clr     I2C[0]
				;107		I2C.SUM = 0;	
0575	5F41	clr     I2C[1]
				;108		I2C.RxNum = 0;
0576	5F43	clr     I2C[3]
				;109		I2C.TxNum = 0;
0577	5F42	clr     I2C[2]
				;110		I2C.CheckSum = 0;
0578	5F44	clr     I2C[4]
				;111		I2C.CheckSum_Buf = 0;
0579	5F45	clr     I2C[5]
				;112		FLAG_I2C_End = FALSE;
057A	74C6	clr     FLAG[0].1
				;113		FLAG_I2C_Err = FALSE;
057B	7446	clr     FLAG[0].0
057C	0003	ret
				;114	}
				;115	
				;116	//初始化系y
				;117	void SYS_LIST_INIT(void)
				;118	{
				;119		MCU_STATE = NTH;
				_SYS_LIST_INIT:
				_SYS_LIST_INIT:
057D	0F0F	mov     a, FH
057E	40B1	mov     MCU_INF[0], a
				;120		MCU_SLEEP = SleepTime; // 3s 
057F	0F4E	mov     a, 4EH
0580	40B2	mov     MCU_INF[1], a
				;121		
				;122		I2C_STATE = NTH;
0581	0F0F	mov     a, FH
0582	40AE	mov     SYS_INF[0], a
				;123		SYS_Version = SysVersion;
0583	0F18	mov     a, 18H
0584	40AF	mov     SYS_INF[1], a
				;124		FLAG_I2C_Err = TRUE;//使用通信e`功能初始化I2C
0585	7046	set     FLAG[0].0
0586	0003	ret
				;125	}
				;126	
				;127	//==============================================
				;128	void USER_PROGRAM_INITIAL()
				;129	{	
				;130	//	_wdtc = 0b10101100;	//wdt = 1s 
				;131		
				;132		_pawu = 0;		//0:禁止下降沿唤醒;   1:使能
				_USER_PROGRAM_INITIAL:
				_USER_PROGRAM_INITIAL:
0587	1F17	clr     PAWU
				;133		_papu = 0;		//0:禁止上拉;         1:使能上拉
0588	1F16	clr     PAPU
				;134		
				;135		_pa = 0x00;	
0589	1F14	clr     PA
				;136		_pac = 0xFF;		//0:输出;      		  1:输入
058A	1F95	set     PAC
				;137	
				;138	
				;139	#if	(USE_IRQ_PIN)		
				;140		 
				;141		MCU_IRQ = 1;		
058B	3094	set     PA1
				;142		MCU_IRQ_C = 0;	
058C	3495	clr     PAC1
				;143		
				;144	#endif 	
				;145		
				;146		
				;147	#if (USE_WAKEUP_PIN)	
				;148	
				;149		if (USE_WAKEUP_PULLHIGH)		
				;150			MCU_WAKEUP_PU = 1;	
058D	3216	set     PAPU4
				;151		else
				;152			MCU_WAKEUP_PU = 0;	
				;153			
				;154		MCU_WAKEUP_C = 1;	
058E	3215	set     PAC4
				;155		_integ = MCU_WAKEUP_TYPE;
058F	0F02	mov     a, 2H
0590	008D	mov     INTEG, a
				;156		_intf = 0;
0591	360E	clr     INTF
				;157		_inte = 1;
0592	308E	set     INTE
				;158		
				;159	#endif 
				;160		
				;161		
				;162	//配置定时器	
				;163	//	_tmrc = 0b00000111;//12Mhz,1/128
				;164	//	_tmr = 131;//256-156=100,1/12M*128=10.7us; 10.7us*100=1.07ms
				;165	//	_te = 1;	//定时/计数器中断控制位
				;166	//	_ton = 1;	//定时/计数器启动/停止控制位
				;167	#if (USE_I2C_PULLHIGH)		
				;168	
				;169		_papu0 = 1;  	//SDA
				;170		_papu2 = 1;  	//SCL
				;171		
				;172	#endif	
				;173		
				;174	//配置IIC	
				;175		_simc0 = 0b11000010;
0593	0FC2	mov     a, C2H
0594	00A4	mov     SIMC0, a
				;176		_sima = I2C_Address;//从机地址
0595	0F28	mov     a, 28H
0596	00A7	mov     SIMC2, a
				;177		
				;178	//I2C超时配置	
				;179		_i2ctoc = 0b10111111; //64ms
0597	0FBF	mov     a, BFH
0598	00A3	mov     I2CTOC, a
				;180		_simf = 0;
0599	360F	clr     SIMF
				;181		_sime = 1;	
059A	300F	set     SIME
				;182		
				;183		SYS_LIST_INIT();
059B	257D	call    _SYS_LIST_INIT
				;184	
				;185		_emi = 1;	//总中断控制位	
059C	300E	set     EMI
059D	0003	ret
				;186	}
				;187	
				;188	//==============================================
				;189	//**********************************************
				;190	//==============================================
				;191	void USER_PROGRAM()
				;192	{
				;193		GET_KEY_BITMAP();//更新按I值
				_USER_PROGRAM:
				_USER_PROGRAM:
059E	24AE	call    L04AE
				;194		
				;195		//取使能的按I
				;196		KEY_DATA[0] = KEY_DATA[0]&KEY_IO_SEL[0] ;
059F	077A	mov     a, __sima[83]
05A0	067C	and     a, __sima[85]
05A1	40CA	mov     rb, a
05A2	474A	mov     a, rb
05A3	00FC	mov     __sima[85], a
				;197		
				;198	//--------------------------------------------------------------------			
				;199		#if (USE_MCU_TYPE == BS83B08A) 
				;200		//有按I按下IRQ低
				;201		 if(KEY_DATA[0]) 
				;202		 {
				;203			MCU_IRQ = 0;
				;204			
				;205			STANDBY_TIME = 0x7F;
				;206		 }
				;207	  	 else
				;208	  	 {
				;209		 	MCU_IRQ = 1;
				;210		 	
				;211	 		if(STANDBY_TIME <= MCU_SLEEP ) // 7E - 3*1000/63 
				;212	  	 	{
				;213	  	 		STANDBY_TIME = 0;
				;214	  	 	}
				;215	  	 }
				;216		#endif			
				;217		
				;218	//--------------------------------------------------------------------		
				;219		#if (USE_MCU_TYPE != BS83B08A) 	
				;220		KEY_DATA[1] = KEY_DATA[1]&KEY_IO_SEL[1] ;	
05A4	077B	mov     a, __sima[84]
05A5	067D	and     a, __sima[86]
05A6	40C9	mov     ra, a
05A7	4749	mov     a, ra
05A8	00FD	mov     __sima[86], a
				;221		//有按I按下IRQ低
				;222		 if(KEY_DATA[0] || KEY_DATA[1]) 
05A9	50CA	sz      rb
05AA	2DAE	jmp     _L17
05AB	50C9	sz      ra
05AC	2DAE	jmp     _L17
05AD	2DB2	jmp     _L18
				;223		 {
				;224			MCU_IRQ = 0;
				_L17:
				_LI1:
05AE	3494	clr     PA1
				;225			
				;226			STANDBY_TIME = 0x7F;
05AF	0F7F	mov     a, 7FH
05B0	00F8	mov     __sima[81], a
05B1	2DB8	jmp     _L19
				;227		 }
				;228	  	 else
				;229	  	 {
				;230		 	MCU_IRQ = 1;
				_L18:
05B2	3094	set     PA1
				;231		 	
				;232	 		if(STANDBY_TIME <= MCU_SLEEP ) // 7E - 3*1000/63 
05B3	4732	mov     a, MCU_INF[1]
05B4	0278	sub     a, __sima[81]
05B5	380A	snz     C
05B6	2DB8	jmp     _L19
				;233	  	 	{
				;234	  	 		STANDBY_TIME = 0;
05B7	1F78	clr     __sima[81]
				;235	  	 	}
				;236	  	 }
				;237		#endif	
				;238	
				;239	//-------------------------------------------------------------------		
				;240	
				;241		if(FLAG_I2C_Err) // 通信e`，臀I2C
				_L19:
05B8	7846	snz     FLAG[0].0
05B9	2DBB	jmp     _L20
				;242		{
				;243			I2C_LIST_INIT();
05BA	2574	call    _I2C_LIST_INIT
				;244		}
				;245	//	----------------------------------------------------------------
				;246		if(FLAG_I2C_End)				//一帧数据接收完成标志
				_L20:
05BB	78C6	snz     FLAG[0].1
05BC	2DE6	jmp     _L16
				;247		{
				;248			//⒌刂忿DQ成a	
				;249			I2C.WordAddr >>= 4;
05BD	5140	swapa   I2C[0]
05BE	0E0F	and     a, FH
05BF	40C0	mov     I2C[0], a
				;250			I2C.WordAddr -= 0x0A;
05C0	0FF6	mov     a, F6H
05C1	43C0	addm    a, I2C[0]
				;251			//接收到的有效
				;252			I2C.RxNum -= 2;
05C2	0FFE	mov     a, FEH
05C3	43C3	addm    a, I2C[3]
				;253		
				;254			//先判 a是否榭的前四 ， 且有效量是否符合大小
				;255			if((I2C.WordAddr <= 3) && (I2C.RxNum == IC_PAGE_SIZS[I2C.WordAddr])) 
05C4	0F03	mov     a, 3H
05C5	4240	sub     a, I2C[0]
05C6	380A	snz     C
05C7	2DE4	jmp     _L22
05C8	0F50	mov     a, 50H
05C9	4340	add     a, I2C[0]
05CA	0083	mov     MP1, a
05CB	0F8A	mov     a, 8AH
05CC	1F01	clr     MP0
05CD	1381	adcm    a, MP0
05CE	273B	call    L073B
05CF	40C9	mov     ra, a
05D0	4743	mov     a, I2C[3]
05D1	4249	sub     a, ra
05D2	390A	snz     Z
05D3	2DE4	jmp     _L22
				;256			{	
				;257				I2C.CheckSum_Buf =~ I2C.CheckSum_Buf;//取反党龅
05D4	4145	cpla    I2C[5]
05D5	40C5	mov     I2C[5], a
				;258				
				;259				if( I2C.CheckSum == I2C.CheckSum_Buf  )//CCheckSum
05D6	4744	mov     a, I2C[4]
05D7	4245	sub     a, I2C[5]
05D8	390A	snz     Z
05D9	2DE4	jmp     _L22
				;260				{
				;261					I2C_STATE = TRUE; //入正_苏I
05DA	0F01	mov     a, 1H
05DB	40AE	mov     SYS_INF[0], a
				;262					
				;263					DATA_LIST_UPDATA();//更新|控值
05DC	252D	call    _DATA_LIST_UPDATA
				;264					
				;265					
				;266					if(MCU_STATE == RESET)// 系yO置，如果O置臀唬tR上臀
05DD	4731	mov     a, MCU_INF[0]
05DE	0A0A	sub     a, AH
05DF	390A	snz     Z
05E0	2DE5	jmp     _L24
				;267					{
				;268						MCU_IRQ = 0;
05E1	3494	clr     PA1
				;269						_wdtc = 0xFF;//MCU RESET //64MS
05E2	1F9A	set     WDTC
05E3	2DE5	jmp     _L24
				;270					}
				;271					
				;272					
				;273				}
				;274				else I2C_STATE = FALSE;	//入e`苏I					
				;275			}	
				;276			else I2C_STATE = FALSE;	//入e`苏I	
				_L22:
05E4	5F2E	clr     SYS_INF[0]
				;277				
				;278			FLAG_I2C_End = FALSE;
				_L24:
05E5	74C6	clr     FLAG[0].1
				_L16:
05E6	0003	ret
				;279		}	
				;280	//	----------------------------------------------------------------
				;281	}
				;282	
				;283	
				;284	
				;285	
				;286	void __attribute((interrupt(0x10))) IIC_ISR(void)
				;287	{ 
				@IIC_ISR_code .SECTION 'CODE'
0010	40CC	mov     r110, a
0011	0704	mov     a, BP
0012	40CD	mov     r210, a
0013	2DE7	jmp     _IIC_ISR
				@dummy16 .SECTION 'CODE'
					----
					----
					----
					----
				L0018:
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
				L00A2:
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
				L04AE:
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
					----
				_IIC_ISR:
				_IIC_ISR:
05E7	070A	mov     a, STATUS
05E8	40CE	mov     r310, a
05E9	0703	mov     a, MP1
05EA	40CF	mov     r410, a
05EB	0701	mov     a, MP0
05EC	40D0	mov     r510, a
				;288	 	vu8 data;	
				;289	 	
				;290	 	_simf = 0;		//清零标志位				
05ED	360F	clr     SIMF
				;291	 	if(_i2ctof)//_i2ctof=1:I2C通信超时
05EE	3B23	snz     I2CTOF
05EF	2DF4	jmp     L05F4
				;292	 	{
				;293	 		_i2ctoen = 1;
05F0	33A3	set     I2CTOEN
				;294	 		_i2ctof = 0;
05F1	3723	clr     I2CTOF
				;295	 		FLAG_I2C_Err = TRUE;
05F2	7046	set     FLAG[0].0
05F3	2F1D	jmp     L071D
				;296	 	}
				;297	 	else 
				;298	 		{
				;299				if(_haas)//_haas=1:slave receive SLAVE_ADDR match							
				L05F4:
05F4	3B25	snz     HAAS
05F5	2E3E	jmp     L063E
				;300				{
				;301					//地址匹配后，判断主机x位,主机是写从机还是读从机
				;302	
				;303					if(_srw)//srw=1:slave send data to master (frist data).
05F6	3925	snz     SRW
05F7	2E35	jmp     L0635
				;304					{							
				;305						
				;306						if(I2C.WordAddr == 0x00)
05F8	50C0	sz      I2C[0]
05F9	2DFF	jmp     L05FF
				;307						{
				;308							I2C.SUM = IC_PAGE_SIZS[0];
05FA	0F03	mov     a, 3H
05FB	40C1	mov     I2C[1], a
				;309							I2C.TxNum = IC_PAGE_HEAD[0];
05FC	0FA0	mov     a, A0H
05FD	40C2	mov     I2C[2], a
				;310							I2C.CheckSum_Buf = 0;
05FE	5F45	clr     I2C[5]
				;311						}
				;312						
				;313							
				;314						switch(I2C.TxNum)
				L05FF:
05FF	4742	mov     a, I2C[2]
0600	40D4	mov     data[1], a
0601	4754	mov     a, data[1]
0602	0AA0	sub     a, A0H
0603	3D0A	sz      Z
0604	2E1C	jmp     L061C
0605	0A10	sub     a, 10H
0606	3D0A	sz      Z
0607	2E1F	jmp     L061F
0608	4754	mov     a, data[1]
0609	0AC0	sub     a, C0H
060A	3D0A	sz      Z
060B	2E22	jmp     L0622
060C	0A10	sub     a, 10H
060D	3D0A	sz      Z
060E	2E25	jmp     L0625
060F	4754	mov     a, data[1]
0610	0AE0	sub     a, E0H
0611	3D0A	sz      Z
0612	2E28	jmp     L0628
0613	4754	mov     a, data[1]
0614	0AF0	sub     a, F0H
0615	390A	snz     Z
0616	2E2B	jmp     L062B
				;315						{	
				;316							case 0xA0 :data = GLOBE_VARIES[0];break;
				L061C:
061C	0760	mov     a, __sima[57]
061D	40D3	mov     data[0], a
061E	2E2D	jmp     L062D
				;317							case 0xB0 :data = GLOBE_VARIES[3];;break;
				L061F:
061F	0763	mov     a, __sima[60]
0620	40D3	mov     data[0], a
0621	2E2D	jmp     L062D
				;318							case 0xC0 :data = KEY_IO_SEL[0];break;
				L0622:
0622	077A	mov     a, __sima[83]
0623	40D3	mov     data[0], a
0624	2E2D	jmp     L062D
				;319							case 0xD0 :data = MCU_INF[0];break;
				L0625:
0625	4731	mov     a, MCU_INF[0]
0626	40D3	mov     data[0], a
0627	2E2D	jmp     L062D
				;320							case 0xE0 :data = KEY_DATA[0];break;
				L0628:
0628	077C	mov     a, __sima[85]
0629	40D3	mov     data[0], a
062A	2E2D	jmp     L062D
				;321							case 0xF0 :data =  SYS_INF[0]; SYS_INF[0] = NTH;break;
0617	472E	mov     a, SYS_INF[0]
0618	40D3	mov     data[0], a
0619	0F0F	mov     a, FH
061A	40AE	mov     SYS_INF[0], a
061B	2E2D	jmp     L062D
				;322							default : data = 0xAA;;break;
				L062B:
062B	0FAA	mov     a, AAH
062C	40D3	mov     data[0], a
				;323						}
				;324						_htx = 1; //_htx=1:	
				L062D:
062D	3225	set     HTX
				;325						_simd = data;
062E	4753	mov     a, data[0]
062F	00A6	mov     SIMD, a
				;326						
				;327						I2C.CheckSum_Buf += data;
0630	4753	mov     a, data[0]
0631	43C5	addm    a, I2C[5]
				;328						
				;329						I2C.SUM += I2C.TxNum;
0632	4742	mov     a, I2C[2]
0633	43C1	addm    a, I2C[1]
0634	2EC6	jmp     L06C6
				;330						
				;331						I2C.TxNum++;
				;332						if(I2C.TxNum >= I2C.SUM) 
				;333							I2C.TxNum = 0xFF;
				;334								
				;335					}else//srw=0:slave receive data for master
				;336						{	
				;337							_htx = 0;//_htx=0:
				L0635:
0635	3625	clr     HTX
				;338							_txak = 0;//_txak=0:slave enable ACK
0636	35A5	clr     TXAK
				;339							_acc = _simd;//dummy
0637	0726	mov     a, SIMD
0638	0085	mov     ACC, a
				;340							
				;341							I2C.RxNum = 0;//begin to conut
0639	5F43	clr     I2C[3]
				;342							I2C.TxNum = 0;
063A	5F42	clr     I2C[2]
				;343							I2C.SUM = 0;
063B	5F41	clr     I2C[1]
				;344							FLAG_I2C_End = FALSE;
063C	74C6	clr     FLAG[0].1
063D	2F1D	jmp     L071D
				;345						} 
				;346				}
				;347				else//_haas=0:slave receive SLAVE_ADDR match,then communication data 
				;348				{	
				;349											  
				;350					if(_htx)//_htx=1:slave send data to master
				L063E:
063E	3A25	snz     HTX
063F	2ECD	jmp     L06CD
				;351					{								
				;352						if(_rxak)//_rxak=1:slave send data,then master NACK;
0640	3825	snz     RXAK
0641	2E4A	jmp     L064A
				;353						{							
				;354							_htx = 0;
0642	3625	clr     HTX
				;355							_txak = 0;	
0643	35A5	clr     TXAK
				;356							_acc = _simd;//dummy
0644	0726	mov     a, SIMD
0645	0085	mov     ACC, a
				;357	
				;358							I2C.WordAddr = 0x00;
0646	5F40	clr     I2C[0]
				;359							I2C.SUM = 0;
0647	5F41	clr     I2C[1]
				;360							I2C.TxNum = 0;
0648	5F42	clr     I2C[2]
0649	2F1D	jmp     L071D
				;361						}
				;362						else//_rxak=1:slave send data,then master ACK
				;363						{				
				;364							//slave continue to send data to master (second and next data).							
				;365							switch(I2C.TxNum)
				L064A:
064A	4742	mov     a, I2C[2]
064B	40D4	mov     data[1], a
064C	4754	mov     a, data[1]
064D	0AA1	sub     a, A1H
064E	3D0A	sz      Z
064F	2E8D	jmp     L068D
0650	0A01	sub     a, 1H
0651	3D0A	sz      Z
0652	2E90	jmp     L0690
0653	4754	mov     a, data[1]
0654	0AB1	sub     a, B1H
0655	3D0A	sz      Z
0656	2E93	jmp     L0693
0657	0A01	sub     a, 1H
0658	3D0A	sz      Z
0659	2E96	jmp     L0696
065A	4754	mov     a, data[1]
065B	0AB3	sub     a, B3H
065C	3D0A	sz      Z
065D	2E99	jmp     L0699
065E	0A01	sub     a, 1H
065F	3D0A	sz      Z
0660	2E9C	jmp     L069C
0661	4754	mov     a, data[1]
0662	0AB5	sub     a, B5H
0663	3D0A	sz      Z
0664	2E9F	jmp     L069F
0665	0A01	sub     a, 1H
0666	3D0A	sz      Z
0667	2EA2	jmp     L06A2
0668	4754	mov     a, data[1]
0669	0AB7	sub     a, B7H
066A	3D0A	sz      Z
066B	2EA5	jmp     L06A5
066C	0A01	sub     a, 1H
066D	3D0A	sz      Z
066E	2EA8	jmp     L06A8
066F	4754	mov     a, data[1]
0670	0AB9	sub     a, B9H
0671	3D0A	sz      Z
0672	2EAB	jmp     L06AB
0673	0A01	sub     a, 1H
0674	3D0A	sz      Z
0675	2EAE	jmp     L06AE
0676	4754	mov     a, data[1]
0677	0ABB	sub     a, BBH
0678	3D0A	sz      Z
0679	2EB1	jmp     L06B1
067A	0A06	sub     a, 6H
067B	3D0A	sz      Z
067C	2EB4	jmp     L06B4
067D	4754	mov     a, data[1]
067E	0AD1	sub     a, D1H
067F	3D0A	sz      Z
0680	2EB7	jmp     L06B7
0681	0A10	sub     a, 10H
0682	3D0A	sz      Z
0683	2EBA	jmp     L06BA
0684	4754	mov     a, data[1]
0685	0AF1	sub     a, F1H
0686	3D0A	sz      Z
0687	2EBD	jmp     L06BD
0688	5654	siza    data[1]
0689	2EC0	jmp     L06C0
				;366							{
				;367			
				;368							//	case 0xA0 :data = GLOBE_VARIES[0];break;
				;369								case 0xA1 :data = GLOBE_VARIES[1];break;
				L068D:
068D	0761	mov     a, __sima[58]
068E	40D3	mov     data[0], a
068F	2EC2	jmp     L06C2
				;370								case 0xA2 :data = GLOBE_VARIES[2];break;
				L0690:
0690	0762	mov     a, __sima[59]
0691	40D3	mov     data[0], a
0692	2EC2	jmp     L06C2
				;371								
				;372							//	case 0xB0 :data = GLOBE_VARIES[3];;break;
				;373								case 0xB1 :data = GLOBE_VARIES[4];break;	
				L0693:
0693	0764	mov     a, __sima[61]
0694	40D3	mov     data[0], a
0695	2EC2	jmp     L06C2
				;374								case 0xB2 :data = GLOBE_VARIES[5];break; 
				L0696:
0696	0765	mov     a, __sima[62]
0697	40D3	mov     data[0], a
0698	2EC2	jmp     L06C2
				;375								case 0xB3 :data = GLOBE_VARIES[6];break;
				L0699:
0699	0766	mov     a, __sima[63]
069A	40D3	mov     data[0], a
069B	2EC2	jmp     L06C2
				;376								case 0xB4 :data = GLOBE_VARIES[7];break;
				L069C:
069C	0767	mov     a, __sima[64]
069D	40D3	mov     data[0], a
069E	2EC2	jmp     L06C2
				;377								case 0xB5 :data = GLOBE_VARIES[8];break;
				L069F:
069F	0768	mov     a, __sima[65]
06A0	40D3	mov     data[0], a
06A1	2EC2	jmp     L06C2
				;378								case 0xB6 :data = GLOBE_VARIES[9];break;
				L06A2:
06A2	0769	mov     a, __sima[66]
06A3	40D3	mov     data[0], a
06A4	2EC2	jmp     L06C2
				;379								case 0xB7 :data = GLOBE_VARIES[10];break;
				L06A5:
06A5	076A	mov     a, __sima[67]
06A6	40D3	mov     data[0], a
06A7	2EC2	jmp     L06C2
				;380	
				;381								#if (USE_MCU_TYPE != BS83B08A) 	
				;382								
				;383								case 0xB8 :data = GLOBE_VARIES[11];break;
				L06A8:
06A8	076B	mov     a, __sima[68]
06A9	40D3	mov     data[0], a
06AA	2EC2	jmp     L06C2
				;384								case 0xB9 :data = GLOBE_VARIES[12];break;	
				L06AB:
06AB	076C	mov     a, __sima[69]
06AC	40D3	mov     data[0], a
06AD	2EC2	jmp     L06C2
				;385								case 0xBA :data = GLOBE_VARIES[13];break;	
				L06AE:
06AE	076D	mov     a, __sima[70]
06AF	40D3	mov     data[0], a
06B0	2EC2	jmp     L06C2
				;386								case 0xBB :data = GLOBE_VARIES[14];break;
				L06B1:
06B1	076E	mov     a, __sima[71]
06B2	40D3	mov     data[0], a
06B3	2EC2	jmp     L06C2
				;387								
				;388								
				;389									
				;390									#if (USE_MCU_TYPE == BS83B16A)
				;391									case 0xBC :data = GLOBE_VARIES[15];break;
				;392									case 0xBD :data = GLOBE_VARIES[16];break;
				;393									case 0xBE :data = GLOBE_VARIES[17];break;
				;394									case 0xBF :data = GLOBE_VARIES[18];break;
				;395									#endif
				;396								
				;397							//	case 0xC0 :data = KEY_IO_SEL[0];break;
				;398								case 0xC1 :data = KEY_IO_SEL[1];break;
				L06B4:
06B4	077B	mov     a, __sima[84]
06B5	40D3	mov     data[0], a
06B6	2EC2	jmp     L06C2
				;399								
				;400							//	case 0xD0 :data = MCU_INF[0];break;
				;401								case 0xD1 :data = MCU_INF[1];break;
				L06B7:
06B7	4732	mov     a, MCU_INF[1]
06B8	40D3	mov     data[0], a
06B9	2EC2	jmp     L06C2
				;402								
				;403							//	case 0xE0 :data = KEY_DATA[0];break;
				;404								case 0xE1 :data = KEY_DATA[1];break;
				L06BA:
06BA	077D	mov     a, __sima[86]
06BB	40D3	mov     data[0], a
06BC	2EC2	jmp     L06C2
				;405							
				;406								#endif
				;407					
				;408							//	case 0xF0 :data =SYS_INF[0];break;
				;409								case 0xF1 :data = SYS_INF[1];break;	
				L06BD:
06BD	472F	mov     a, SYS_INF[1]
06BE	40D3	mov     data[0], a
06BF	2EC2	jmp     L06C2
				;410								
				;411								case 0xFF :data =~I2C.CheckSum_Buf;break;	
068A	4145	cpla    I2C[5]
068B	40D3	mov     data[0], a
068C	2EC2	jmp     L06C2
				;412									
				;413								default : data = 0xAA ;break;
				L06C0:
06C0	0FAA	mov     a, AAH
06C1	40D3	mov     data[0], a
				;414							}	
				;415							
				;416							_simd = data;
				L06C2:
06C2	4753	mov     a, data[0]
06C3	00A6	mov     SIMD, a
				;417							
				;418							I2C.CheckSum_Buf += data;
06C4	4753	mov     a, data[0]
06C5	43C5	addm    a, I2C[5]
				;419								
				;420							I2C.TxNum++;
				L06C6:
06C6	54C2	inc     I2C[2]
				;421							if(I2C.TxNum >= I2C.SUM) 
06C7	4742	mov     a, I2C[2]
06C8	4241	sub     a, I2C[1]
06C9	380A	snz     C
06CA	2F1D	jmp     L071D
				;422								I2C.TxNum = 0xFF;
06CB	5FC2	set     I2C[2]
06CC	2F1D	jmp     L071D
				;423		
				;424						}			
				;425					}
				;426					else//_htx=0:slave receive data for master
				;427					{//for slave send data to master
				;428						data = _simd;
				L06CD:
06CD	0726	mov     a, SIMD
06CE	40D3	mov     data[0], a
				;429						_txak = 0;
06CF	35A5	clr     TXAK
				;430						
				;431						if(I2C.RxNum < 1)
06D0	50C3	sz      I2C[3]
06D1	2F08	jmp     L0708
				;432						{
				;433							//for slave send data to master
				;434							//取地址
				;435							I2C.WordAddr = data&0xf0;					
06D2	4753	mov     a, data[0]
06D3	0EF0	and     a, F0H
06D4	40C0	mov     I2C[0], a
				;436		
				;437						   	switch(I2C.WordAddr)
06D5	4740	mov     a, I2C[0]
06D6	40D4	mov     data[1], a
06D7	4754	mov     a, data[1]
06D8	0AB0	sub     a, B0H
06D9	3D0A	sz      Z
06DA	2EEE	jmp     L06EE
06DB	0A10	sub     a, 10H
06DC	3D0A	sz      Z
06DD	2EF3	jmp     L06F3
06DE	4754	mov     a, data[1]
06DF	0AD0	sub     a, D0H
06E0	3D0A	sz      Z
06E1	2EF8	jmp     L06F8
06E2	0A10	sub     a, 10H
06E3	3D0A	sz      Z
06E4	2EFD	jmp     L06FD
06E5	4754	mov     a, data[1]
06E6	0AF0	sub     a, F0H
06E7	390A	snz     Z
06E8	2F02	jmp     L0702
				;438							{	
				;439						//		case 0xA0 :I2C.SUM = IC_PAGE_SIZS[0];I2C.TxNum = IC_PAGE_HEAD[0];break;
				;440								case 0xB0 :I2C.SUM = IC_PAGE_SIZS[1];I2C.TxNum = IC_PAGE_HEAD[1];break;
				L06EE:
06EE	0F0C	mov     a, CH
06EF	40C1	mov     I2C[1], a
06F0	0FB0	mov     a, B0H
06F1	40C2	mov     I2C[2], a
06F2	2F06	jmp     L0706
				;441								case 0xC0 :I2C.SUM = IC_PAGE_SIZS[2];I2C.TxNum = IC_PAGE_HEAD[2];break;
				L06F3:
06F3	0F02	mov     a, 2H
06F4	40C1	mov     I2C[1], a
06F5	0FC0	mov     a, C0H
06F6	40C2	mov     I2C[2], a
06F7	2F06	jmp     L0706
				;442								case 0xD0 :I2C.SUM = IC_PAGE_SIZS[3];I2C.TxNum = IC_PAGE_HEAD[3];break;
				L06F8:
06F8	0F02	mov     a, 2H
06F9	40C1	mov     I2C[1], a
06FA	0FD0	mov     a, D0H
06FB	40C2	mov     I2C[2], a
06FC	2F06	jmp     L0706
				;443								case 0xE0 :I2C.SUM = IC_PAGE_SIZS[4];I2C.TxNum = IC_PAGE_HEAD[4];break;
				L06FD:
06FD	0F02	mov     a, 2H
06FE	40C1	mov     I2C[1], a
06FF	0FE0	mov     a, E0H
0700	40C2	mov     I2C[2], a
0701	2F06	jmp     L0706
				;444								case 0xF0 :I2C.SUM = IC_PAGE_SIZS[5];I2C.TxNum = IC_PAGE_HEAD[5];break;
06E9	0F02	mov     a, 2H
06EA	40C1	mov     I2C[1], a
06EB	0FF0	mov     a, F0H
06EC	40C2	mov     I2C[2], a
06ED	2F06	jmp     L0706
				;445								default   :I2C.SUM = IC_PAGE_SIZS[0];I2C.TxNum = IC_PAGE_HEAD[0];break;
				L0702:
0702	0F03	mov     a, 3H
0703	40C1	mov     I2C[1], a
0704	0FA0	mov     a, A0H
0705	40C2	mov     I2C[2], a
				;446							}
				;447							I2C.CheckSum_Buf = 0;
				L0706:
0706	5F45	clr     I2C[5]
0707	2F1C	jmp     L071C
				;448							I2C.RxNum++;
				;449	
				;450						}
				;451						else if(I2C.RxNum <= I2C.SUM)
				L0708:
0708	4741	mov     a, I2C[1]
0709	4243	sub     a, I2C[3]
070A	380A	snz     C
070B	2F19	jmp     L0719
				;452							 { 
				;453								I2C_Data[I2C.RxNum - 1] = data;
070C	0FB3	mov     a, B3H
070D	4343	add     a, I2C[3]
070E	0083	mov     MP1, a
070F	0F00	mov     a, 0H
0710	1F01	clr     MP0
0711	1381	adcm    a, MP0
0712	0701	mov     a, MP0
0713	0084	mov     BP, a
0714	4753	mov     a, data[0]
0715	0082	mov     [02H], a
				;454								I2C.CheckSum_Buf += data;
0716	4753	mov     a, data[0]
0717	43C5	addm    a, I2C[5]
0718	2F1C	jmp     L071C
				;455								I2C.RxNum++;
				;456							 }
				;457							 else 
				;458							 {
				;459							 	I2C.CheckSum = data;
				L0719:
0719	4753	mov     a, data[0]
071A	40C4	mov     I2C[4], a
				;460							 	FLAG_I2C_End = TRUE;
071B	70C6	set     FLAG[0].1
				;461							 	I2C.RxNum++;
				L071C:
071C	54C3	inc     I2C[3]
				L071D:
071D	474D	mov     a, r210
071E	0084	mov     BP, a
071F	474E	mov     a, r310
0720	008A	mov     STATUS, a
0721	474F	mov     a, r410
0722	0083	mov     MP1, a
0723	4750	mov     a, r510
0724	0081	mov     MP0, a
0725	474C	mov     a, r110
0726	0004	reti
				;462							 }
				;463							 
				;464							
				;465					}		
				;466				}
				;467			}	
				;468	}
				;469	
				;470	
				;471	
				;472	
				;473	void __attribute((interrupt(0x04))) ISR_INT (void)
				;474	{		
				@ISR_INT_code .SECTION 'CODE'
0004	40D1	mov     r104, a
0005	070A	mov     a, STATUS
0006	40D2	mov     r204, a
0007	2F27	jmp     _ISR_INT
				@dummy4 .SECTION 'CODE'
					----
					----
000A	0000	nop
000B	0000	nop
000C	0000	nop
000D	0000	nop
000E	0000	nop
000F	0000	nop
				;475		_intf = 0;
				_ISR_INT:
				_ISR_INT:
0727	360E	clr     INTF
				;476		STANDBY_TIME = 0x7F;
0728	0F7F	mov     a, 7FH
0729	00F8	mov     __sima[81], a
				;477		GCC_DELAY(1000);
072A	0FF9	mov     a, F9H
072B	2736	call    L0736
072C	4752	mov     a, r204
072D	008A	mov     STATUS, a
072E	4751	mov     a, r104
072F	0004	reti
0730	0000	nop
0731	0000	nop
0732	0000	nop
0733	0000	nop
0734	0000	nop
0735	0000	nop
				L0736:
0736	0000	nop
0737	1785	sdz     ACC
0738	2F36	jmp     L0736
0739	0003	ret
073A	1483	inc     MP1
				L073B:
073B	3F81	sz      MP0.7
073C	2F41	jmp     L0741
073D	0701	mov     a, MP0
073E	0084	mov     BP, a
073F	0702	mov     a, [02H]
0740	0003	ret
				L0741:
0741	1B01	rrca    MP0
0742	0E3F	and     a, 3FH
0743	0089	mov     TBHP, a
0744	1B03	rrca    MP1
0745	0087	mov     TBLP, a
0746	1D05	tabrd   ACC
0747	3C0A	sz      C
0748	0708	mov     a, TBLH
0749	0003	ret
				;478		
				;479	}
				;480	
				;481	
				data .SECTION 'DATA'
				__acc DB DUP (?) ; __acc
				__integ DB DUP (?) ; __integ
				__intc0 DB DUP (?) ; __intc0
				__intc1 DB DUP (?) ; __intc1
				__pa DB DUP (?) ; __pa
				__pac DB DUP (?) ; __pac
				__papu DB DUP (?) ; __papu
				__pawu DB DUP (?) ; __pawu
				__wdtc DB DUP (?) ; __wdtc
				__i2ctoc DB DUP (?) ; __i2ctoc
				__simc0 DB DUP (?) ; __simc0
				__simc1 DB DUP (?) ; __simc1
				__simd DB DUP (?) ; __simd
				__sima DB DUP (?) ; __sima
				SYS_INF DB DUP (?) ; SYS_INF
				MCU_INF DB DUP (?) ; MCU_INF
				I2C_Data DB DUP (?) ; I2C_Data
				I2C DB DUP (?) ; I2C
				FLAG DB DUP (?) ; FLAG
				POR_ID DB DUP (?) ; POR_ID
				ra DB DUP (?)
				rb DB DUP (?)
				rc DB DUP (?)
				r110 DB DUP (?)
				r210 DB DUP (?)
				r310 DB DUP (?)
				r410 DB DUP (?)
				r510 DB DUP (?)
				r104 DB DUP (?)
				r204 DB DUP (?)
				data DB DUP (?) ; data
				_DATA_LIST_UPDATA_2 DB DUP (?)
